<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<title>Funktionale versus objektorientierte Programmierung</title>
<meta name="author" content="Johannes Brauer"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="./mycss/myrevealstyle.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" type="text/css" href="mycss/mystyle.css" />
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">Funktionale versus objektorientierte Programmierung</h1><h3 class="subtitle">Programmierparadigmen</h3><h2 class="author">Johannes Brauer</h2><h2 class="date"></h2>
</section>
<section>
<section id="slide-orged2cc11">
<h2 id="orged2cc11">Ziele</h2>
<ul>
<li>Erkennen von Zusammenhängen zwischen verschiedenen
Programmierparadigmen, insbesondere zwischen der funktionalen und
der objektorientierte Programmierung</li>
<li>Erkennen der Kernkonzepte der Paradigmen</li>
<li>Verstehen von Dimensionen der Erweiterbarkeit von Programmen</li>

</ul>
</section>
</section>
<section>
<section id="slide-org4c8fefe">
<h2 id="org4c8fefe">Funktionale versus objektorientierte Programmierung</h2>
<div class="outline-text-2" id="text-org4c8fefe">
</div>
</section>
<section id="slide-orge70600b">
<h3 id="orge70600b">Ein wenig Historie</h3>

<div class="figure">
<p><img src="./Abbildungen/programmierung.png" alt="programmierung.png" width="700px" />
</p>
</div>
</section>
<section id="slide-org59398c7">
<h4 id="org59398c7">1936</h4>

<div class="figure">
<p><img src="./Abbildungen/alan-turing.jpg" alt="alan-turing.jpg" width="200px" />
</p>
</div>

<div class="figure">
<p><img src="./Abbildungen/entscheidungsproblem.png" alt="entscheidungsproblem.png" width="600px" />
</p>
</div>
<ul>
<li>Begriffe: Unterprogramm, Makro, code is data</li>

</ul>
</section>
<section id="slide-orgb90025a">
<h4 id="orgb90025a">1945</h4>
<ul>
<li>Turing schreibt Code. 
<ul>
<li>in Binärform</li>
<li>benutzt Integer-Zahlen (add) und boolesche Operationen</li>
<li>erfindet Unterprogramme einschl. Stack</li>
<li>erfindet Gleitkommazahlen</li>

</ul></li>
<li>Anzahl der Computer weltweit: \(O(1)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1)\).</li>

</ul>
</section>
<section id="slide-org3d7c3dc">
<h4 id="org3d7c3dc">1953 Fortran</h4>

<div class="figure">
<p><img src="./Abbildungen/Fortran.png" alt="Fortran.png" />
</p>
</div>
</section>
<section id="slide-org916f28a">
<h4 id="org916f28a"></h4>

<div class="figure">
<p><img src="./Abbildungen/McCarthy.jpg" alt="McCarthy.jpg" />
</p>
</div>

<p>
Funktionale Programmierung
</p>

</section>
<section id="slide-orgc4105ae">
<h4 id="orgc4105ae">1960</h4>
<ul>
<li>Anzahl der Computer weltweit: \(O(1E2)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E3)\).</li>

</ul>
</section>
<section id="slide-org5ee062d">
<h4 id="org5ee062d">1965</h4>
<ul>
<li>Anzahl der Computer weltweit: \(O(1E4)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E5)\).</li>

</ul>
</section>
<section id="slide-orgd2aa702">
<h4 id="orgd2aa702">1966 Simula 1967</h4>
<p>
Ole-Johan Dahl, Kristen Nygard:
</p>


<div class="figure">
<p><img src="./Abbildungen/simuladahlnygard.gif" alt="simuladahlnygard.gif" width="400px" />
</p>
</div>

<p>
Objektorientierte Programmierung
</p>

</section>
<section id="slide-orgc202052">
<h4 id="orgc202052">1968</h4>
<p>
Edsger Dijkstra:
</p>

<div class="nebeneinander">

<div class="figure">
<p><img src="./Abbildungen/dijkstra.jpg" alt="dijkstra.jpg" />
</p>
</div>

</div>
<div class="nebeneinander">

<div class="figure">
<p><img src="./Abbildungen/gotoharmfull.png" alt="gotoharmfull.png" />
</p>
</div>

</div>
<div class="clear">

</div>
<p>
Strukturierte Programmierung
</p>

</section>
<section id="slide-org4ef6905">
<h3 id="org4ef6905">Drei Paradigmen</h3>
<ul>
<li>1968 &#x2013; Strukturierte Programmierung. Edsger Dijkstra zeigt, wie der
Gebrauch von <code>GOTO</code>-Anweisungen durch <code>if/then/else</code> und <code>while</code>
ersetzt werden kann.</li>

<li>1966 &#x2013; Objektorientierte Programmierung. Ole-Johan Dahl und Kristen
Nygaard entwickeln die erste OO-Sprache: <i>Simula-67</i>. Durch die
Einführung der Polymorphie konnten die <code>function pointers</code>
eliminiert werden.</li>

<li>1957 &#x2013; Funktionale Programmierung. John McCarthy erfindet
Lisp. Lisp basiert auf dem Lambda-Kalkül, entwickelt von Alonzo
Church in den 1930ern. Ein wesentliches Merkmal: Es gibt keine Zuweisung.</li>

</ul>

<p>
Drei Paradigmen, drei Einschränkungen
</p>

</section>
<section id="slide-org1ad2ca3">
<h4 id="org1ad2ca3">1970</h4>
<ul>
<li>Anzahl der Computer weltweit: \(O(1E5)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E6)\).</li>

</ul>

</section>
<section id="slide-orgc5cac5c">
<h3 id="orgc5cac5c">Was bringt die funktionale Programmierung?</h3>
<ul>
<li>Worin besteht der Kerngedanke der funktionalen Programmierung?</li>

</ul>
</section>
<section id="slide-org74476f6">
<h3 id="org74476f6">Fehlen der Mutation</h3>
<ul>
<li>Wie kann das „Fehlen von Etwas” ein wichtiges Feature eines
Programmierparadigmas sein?</li>
<li>Das Fehlen von Zuweisungen ermöglicht das Schreiben von Programmcode
ohne befürchten zu müssen, das anderer Code den eigenen negativ
beeinflusst.</li>
<li>Nicht änderbare Datenstrukturen sind das wichtigste „non-feature“,
das eine Programmiersprache haben kann.</li>
<li>Auf einen wichtigen Vorteil soll hier besonders eingegangen werden:
Sharing und Aliasing werden irrelevant.</li>

</ul>

</section>
<section id="slide-org9ffe95a">
<h4 id="org9ffe95a">Beispiel: Sortieren eines Vektors</h4>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">sort-pair</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>pair<span style="color: #909183;">]</span>
     <span style="color: #909183;">(</span><span style="color: #0000FF;">if</span> <span style="color: #709870;">(</span>&lt; <span style="color: #907373;">(</span>pair 0<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>pair 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 
         pair
         <span style="color: #709870;">[</span><span style="color: #907373;">(</span>pair 1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>pair 0<span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div>

<ul>
<li>Die Funktion liefert im <code>else</code>-Fall einen neu erzeugten Vektor.</li>
<li>Aber was passiert im <code>then</code>-Fall? 
<ul>
<li>Erhalten wir eine Kopie des an die Funktion übergebenen Vektors
oder</li>
<li>gibt die Funktion ein Alias auf denselben Vektor zurück?</li>

</ul></li>
<li>Bei Fehlen von Mutation ist die Frage irrelevant.</li>

</ul>

</section>
<section id="slide-orgd580b9b">
<h4 id="orgd580b9b">Beispiel: Funktion append</h4>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">append</span> 
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>xs ys<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
      <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> xs<span style="color: #709870;">)</span> ys
      <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> xs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>append <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> xs<span style="color: #6276BA;">)</span> ys<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div>
<ul>
<li>Frage: Teilt die zurückgegebene Liste irgendwelche Elemente mit den
Argumentlisten?</li>
<li>Antwort 1: Es spielt keine Rolle, solange kein Aufrufer das
feststellen kann.</li>
<li>Antwort 2: Ja, die neue Liste „wiederverwendet” alle Elemente von
<code>ys</code>. Das spart Speicherplatz und Rechenzeit.</li>
<li>Ein Problem entstünde nur dann, wenn nachträglich die Liste <code>ys</code>
verändert werden könnte.</li>
<li>Unveränderliche Daten erleichtern das Schreiben eleganter
Algorithmen erheblich.</li>

</ul>
</section>
<section>
<ul>
<li>Auch die Funktion <code>rest</code> teilt „dankenswerterweise” ihr Ergebnis
mit ihrer Argumentliste (bis auf das erste Element).</li>
<li>In der objektorientierten Programmierung, wo intensiv von
Verweissemantik und Mutation Gebrauch gemacht wird, muss die
Programmiererin sich mit den Fragen beschäftigen, ob Verweise auf
alte Objekte genutzt oder neue Objekte erzeugt werden.</li>

</ul>

</section>
<section id="slide-org950f578">
<h4 id="org950f578">Beispiel: Ein Java-Programm</h4>
<ul>
<li><p>
Ein inzwischen behobenes Sicherheitsproblem in einer Java library:
</p>
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ProtectedResource</span> <span style="color: #707183;">{</span>
     <span style="color: #0000FF;">private</span> <span style="color: #6434A3;">Resource</span> <span style="color: #BA36A5;">theResource</span> = ...;
     <span style="color: #0000FF;">private</span> <span style="color: #6434A3;">String</span><span style="color: #7388D6;">[]</span> <span style="color: #BA36A5;">allowedUsers</span> = ...;
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span><span style="color: #7388D6;">[]</span> <span style="color: #006699;">getAllowedUsers</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> allowedUsers;
     <span style="color: #7388D6;">}</span>
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">currentUser</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span>
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">useTheResource</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">for</span><span style="color: #909183;">(</span><span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">i</span>=0; i &lt; allowedUsers.<span style="color: #6434A3;">length</span>; i++<span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
           <span style="color: #0000FF;">if</span><span style="color: #709870;">(</span>currentUser<span style="color: #907373;">()</span>.equals<span style="color: #907373;">(</span>allowedUsers<span style="color: #6276BA;">[</span>i<span style="color: #6276BA;">]</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">{</span>
               ... <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">access allowed: use it</span>
               <span style="color: #0000FF;">return</span>; 
           <span style="color: #709870;">}</span>
        <span style="color: #909183;">}</span>
        <span style="color: #0000FF;">throw</span> <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">IllegalAccessException</span><span style="color: #909183;">()</span>;
     <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div></li>

<li>Problem: <code>getAllowedUsers</code> gibt einen Verweis auf das Array
<code>allowedUsers</code> zurück.</li>
<li>Damit ist <code>getAllowedUsers()[0] = currentUser()</code> möglich.</li>
<li>Abhilfe?</li>

</ul>

</section>
<section id="slide-org5952483">
<h3 id="org5952483">Integration von Daten und Funktionen &#x2013; Übergang zum Objektbegriff</h3>
<p>
(bereits in EidP behandelt!)
</p>
</section>
<section id="slide-org29d50dd">
<h4 id="org29d50dd">Funktionen mit Funktionen als Resultat</h4>
<p>
Beispiele aus dem letzten Semester:
</p>
<ul>
<li><p>
Was liefert der Ausdruck <code>(inc 3)</code>, wenn die Funktion <code>inc</code> wie folgt
definiert ist?
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">   <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">inc</span> 
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #709870;">[</span>z<span style="color: #709870;">]</span> <span style="color: #709870;">(</span>+ z n<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>
<li><p>
Welches Resultat liefert eine Anwendung der Funktion <code>dot</code>?
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">   <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">dot</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>f g<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #709870;">[</span>x<span style="color: #709870;">]</span> <span style="color: #709870;">(</span>f <span style="color: #907373;">(</span>g x<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>

</ul>
</section>
<section id="slide-org9864b80">
<h4 id="org9864b80">Was ist ein Objekt?</h4>
<ul>
<li>Objekte im Sinne der „objektorientierten Programmierung” sind
nichts weiter als Funktionen mit „internen” Daten.</li>
<li><p>
So gesehen liefert ein Ausdruck der Art
</p>
<pre class="example">
(def inc-obj (inc 3))
</pre>

<p>
ein Objekt (eine Funktion) mit dem internen Datum (Zustand) <b>3</b>.
</p></li>
<li>Die Funktion bezeichnet man in der objektorientierten Programmierung
auch als <i>Methode</i>.</li>
<li>Durch den Ausdruck <code>(inc-obj 7)</code> 
wird die Methode aktiviert (die Funktion aufgerufen). Sie verlangt
ein Argument.</li>
<li><code>inc-obj</code> ist ein sehr primitives Objekt mit nur einer (unveränderlichen)
Zustandsgrößen und einer Methode.</li>

</ul>
</section>
<section id="slide-org9e371cd">
<h4 id="org9e371cd">Ein etwas interessanteres Objekt</h4>
<div class="org-src-container">

<pre  class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">person</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>name vorname<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">let</span> <span style="color: #709870;">[</span>get-name    <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span> name<span style="color: #907373;">)</span>
          get-vorname <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span>vorname<span style="color: #907373;">)</span>
          vollname    <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">str</span> vorname <span style="color: #008000;">" "</span> name<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
          gruss       <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[</span>g<span style="color: #6276BA;">]</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">str</span> g <span style="color: #008000;">" "</span> <span style="color: #858580;">(</span>vollname<span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span>
      <span style="color: #709870;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #907373;">[</span>nachricht<span style="color: #907373;">]</span>
        <span style="color: #907373;">(</span><span style="color: #0000FF;">cond</span>
          <span style="color: #6276BA;">(</span>= nachricht 'get-name<span style="color: #6276BA;">)</span> get-name
          <span style="color: #6276BA;">(</span>= nachricht 'get-vorname<span style="color: #6276BA;">)</span> get-vorname
          <span style="color: #6276BA;">(</span>= nachricht 'get-vollname<span style="color: #6276BA;">)</span> vollname
          <span style="color: #6276BA;">(</span>= nachricht 'gruss<span style="color: #6276BA;">)</span> gruss
          <span style="color: #D0372D;">:else</span> <span style="color: #6276BA;">(</span><span style="color: #0000FF;">throw</span> <span style="color: #858580;">(</span>Exception. <span style="color: #008000;">"unbekannte Nachricht"</span><span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
<ul>
<li>Ein Aufruf der Funktion <code>person</code> liefert ein „Objekt” mit 
<ul>
<li>zwei Zustandsgrößen (<code>name</code>, <code>vorname</code>) und</li>
<li>vier Methoden: <code>get-name</code>, <code>get-vorname</code>, <code>vollname</code> und <code>gruss</code></li>

</ul></li>

</ul>
</section>
<section>
<ul>
<li>„In Wirklichkeit” liefert ein Aufruf der Funktion <code>person</code> eine
Verteilfunktion, die anhand ihres Parameters <code>nachricht</code> ermittelt,
welche der Methoden aufzurufen ist.</li>

</ul>

</section>
<section id="slide-orgea6a9f1">
<h4 id="orgea6a9f1">Anwendungen des <code>person</code>-Objekts</h4>
<div class="org-src-container">

<pre  class="src src-clojure"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Objekterzeugung:</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">p1</span> <span style="color: #7388D6;">(</span>person <span style="color: #008000;">"Gans"</span> <span style="color: #008000;">"Gustav"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-vorname<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>     <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gustav"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-name<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>        <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gans"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-vollname<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>    <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gustav Gans"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'gruss<span style="color: #7388D6;">)</span> <span style="color: #008000;">"hallo"</span><span style="color: #707183;">)</span>   <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "hallo Gustav Gans"</span>
<span style="color: #707183;">(</span>p1 'x<span style="color: #707183;">)</span>                 <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">error</span>
</pre>
</div>

</section>
<section id="slide-org004279b">
<h4 id="org004279b">Java-Klasse <code>Person</code></h4>
<div class="org-src-container">

<pre  class="src src-java"> <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Person</span>
<span style="color: #707183;">{</span>
   <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">vorname</span>, <span style="color: #BA36A5;">name</span>;

    <span style="color: #0000FF;">public</span> <span style="color: #006699;">Person</span> <span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">n</span>, <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">v</span><span style="color: #7388D6;">)</span>
    <span style="color: #7388D6;">{</span>
        vorname = v;
        name = n;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">get_name</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> name;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">get_vorname</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> vorname;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">vollname</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> vorname + <span style="color: #008000;">" "</span> + name;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">gruss</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">gruss</span><span style="color: #7388D6;">)</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> gruss + <span style="color: #008000;">" "</span> + <span style="color: #0000FF;">this</span>.vollname<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>

</section>
<section id="slide-orgb170293">
<h4 id="orgb170293">Zusammenfassung</h4>
<ul>
<li>Für die objektorientierte Programmierung bedarf es keiner speziellen
Programmiersprachen.</li>
<li>Objektorientierung besteht nur aus einer Reihe von Konventionen zum
Umgang mit Daten.</li>
<li>Diese Konventionen werden von objektorientierten Sprachen explizit
und implizit unterstützt. Z. B. muss die Verteilfunktion nicht
selbst programmiert werden.</li>
<li>Objekte sind nichts weiter als
<ul>
<li>eine Menge von <code>Name-&gt;Wert</code>-Abbildungen</li>
<li>eine Reihe von Funktionen, die solche Abbildungen als erstes
Argument akzeptieren und</li>
<li>eine Verteilfunktion, die ermittelt, welche dieser Funtkion
aufzurufen ist.</li>

</ul></li>

</ul>
</section>
<section id="slide-orgf21990a">
<h3 id="orgf21990a">Erweiterbarkeit von Programmen</h3>
<div class="outline-text-3" id="text-orgf21990a">
</div>
</section>
<section id="slide-org8ee3cff">
<h4 id="org8ee3cff">Identifizierung des Problems</h4>
<div class="outline-text-4" id="text-org8ee3cff">
</div>
</section>
<section id="slide-orgc9d2648">
<h5 id="orgc9d2648">Objektorientierte Programmierung &#x2026;</h5>
<ul>
<li>&#x2026; ist gekennzeichnet durch dynamische Bindung und Polymorphie.</li>
<li><p>
Polymorphie-Ansatz der meisten OO-Sprachen:
</p>
<ul>
<li>Methoden werden innerhalb von Klassen definiert.</li>
<li>Methodenaktivierung durch „Senden von Nachrichten”: Die zu
aktivierende Methode wird anhand der Klassenzugehörigkeit des
Empfängerobjekts bestimmt.</li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Rechteck</span> <span style="color: #707183;">{</span>
     <span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">breite</span>, <span style="color: #BA36A5;">hoehe</span>;
     <span style="color: #6434A3;">int</span> <span style="color: #006699;">flaeche</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span><span style="color: #707183;">}</span>

   <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Kreis</span> <span style="color: #707183;">{</span>
      <span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">radius</span>;
      <span style="color: #6434A3;">int</span> <span style="color: #006699;">flaeche</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span><span style="color: #707183;">}</span>
</pre>
</div>

</div></li>

</ul>

<ul>
<li>Jeder „Datentyp” definiert seine Operationen.</li>
<li><b>Problem</b>: Datentypen können ohne Zugriff auf den Quellcode nicht erweitert werden.</li>

</ul>
</section>
<section id="slide-orga5b3f0b">
<h5 id="orga5b3f0b">Funktionale Programmierung &#x2026;</h5>
<ul>
<li><p>
&#x2026; ist gekennzeichnet durch Funktionen als Werte erster Ordnung und
die Abwesenheit von Seiteneffekten. 
</p>
<ul>
<li>Funktionen enthalten Fallunterscheidungen für Datentypen</li>

</ul>
<div class="small">
<div class="org-src-container">

<pre  class="src src-clojure">  <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">figur-flaeche</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>f<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span>
        <span style="color: #709870;">(</span>kreis? f<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>kreis-flaeche f<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>rechteck? f<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>rechteck-flaeche f<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>
<li><b>Problem</b>: Hinzufügen eines neuen Datentyps bedeutet: Alle vorhanden
Figur-Funktionen müssen angepasst werden.</li>

</ul>
</section>
<section id="slide-org2107bcf">
<h4 id="org2107bcf">Objektorientierte versus funktionale Zerlegung</h4>
<ul>
<li>Rückgriff auf das Problem der Verarbeitung einer kleinen „Sprache”
über arithmetische Ausdrücke (vgl. <a href="./Aufgaben/aufgaben.html#/slide-aufgabemustervergleich">Aufgabe Mustervergleich</a>).</li>
<li>In der funktionalen Programmierung werden üblicherweise Programme
durch Zerlegung in Funktionen für die auszuführenden Operationen zerlegt.</li>
<li>In der objektorientierten Programmierung werden Programme in Klassen
zerlegt, die Verhalten für bestimmte Arten von Daten bereitstellen.</li>
<li>Die folgenden Betrachtungen sollen einen Eindruck vermitteln, welche
Probleme mit der Erweiterung von Programmen verbunden sein können
und inwieweit diese mit dem verwendeten Paradigma in Verbindung
stehen.</li>

</ul>
</section>
<section id="slide-problemarithmeischeausdruecke">
<h5 id="problemarithmeischeausdruecke">Problemspezifikation</h5>
<ul>
<li>Die arithmetischen Ausdrücke bestehen aus ganzzahligen Werten,
Negationen und Additionen.</li>
<li>Für diese Ausdrücke sollen die Operationen
<ul>
<li>Auswertung (Bestimmung des Zahlenwerts)</li>
<li>Umwandlung in eine Zeichenkettendarstellung</li>
<li>Bestimmung, ob der Ausdruck die Konstante 0 enthält</li>

</ul></li>
<li><p>
Die Konstellation kann durch diese Matrix zusammengefasst werden.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">eval</td>
<td class="org-left">toString</td>
<td class="org-left">hasZero</td>
</tr>

<tr>
<td class="org-left">Constant</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Add</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Negation</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table></li>
<li>Gleichgültig welches Paradigma benutzt werden soll, es muss für
jedes der neun Felder in der Matrix das geeignete Verhalten bestimmt
werden.</li>

</ul>
</section>
<section id="slide-org31cf8c2">
<h5 id="org31cf8c2">Funktionale Lösung in ML</h5>
<ul>
<li>Die drei Datenarten werden an einer Stelle definiert.</li>
<li>Die Implementierung der Operationen erfolgt „spaltenweise”.</li>

</ul>
<div class="org-src-container">

<pre  class="src src-sml"><span style="color: #0000FF;">datatype</span> <span style="font-weight: bold;">exp</span> = 
         Constant    <span style="color: #0000FF;">of</span> int
         | Negate <span style="color: #0000FF;">of</span> exp 
         | Add    <span style="color: #0000FF;">of</span> exp * exp 

<span style="color: #0000FF;">exception</span> BadResult <span style="color: #0000FF;">of</span> string

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">eval</span> e = 
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant _ =&gt; e
      | Negate e1  =&gt; <span style="color: #707183;">(</span><span style="color: #0000FF;">case</span> eval e1 <span style="color: #0000FF;">of</span> 
                            Constant i =&gt; Constant <span style="color: #7388D6;">(</span>~i<span style="color: #7388D6;">)</span>
                          | _ =&gt; <span style="color: #0000FF;">raise</span> BadResult <span style="color: #008000;">"non-int in negation"</span><span style="color: #707183;">)</span>
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span> =&gt; <span style="color: #707183;">(</span><span style="color: #0000FF;">case</span> <span style="color: #7388D6;">(</span>eval e1, eval e2<span style="color: #7388D6;">)</span> <span style="color: #0000FF;">of</span>
                           <span style="color: #7388D6;">(</span>Constant i, Constant j<span style="color: #7388D6;">)</span> =&gt; Constant <span style="color: #7388D6;">(</span>i+j<span style="color: #7388D6;">)</span>
                           | _ =&gt; <span style="color: #0000FF;">raise</span> BadResult <span style="color: #008000;">"non-ints in addition"</span><span style="color: #707183;">)</span>

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">toString</span> e =
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant i  =&gt; Int.toString i
      | Negate e1   =&gt; <span style="color: #008000;">"-("</span> ^ <span style="color: #707183;">(</span>toString e1<span style="color: #707183;">)</span> ^ <span style="color: #008000;">")"</span>
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span>  =&gt; <span style="color: #008000;">"("</span>  ^ <span style="color: #707183;">(</span>toString e1<span style="color: #707183;">)</span> ^ <span style="color: #008000;">" + "</span> ^ <span style="color: #707183;">(</span>toString e2<span style="color: #707183;">)</span> ^ <span style="color: #008000;">")"</span>

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">hasZero</span> e =
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant i       =&gt; i=0 
      | Negate e1   =&gt; hasZero e1
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span>  =&gt; <span style="color: #707183;">(</span>hasZero e1<span style="color: #707183;">)</span> <span style="color: #0000FF;">orelse</span> <span style="color: #707183;">(</span>hasZero e2<span style="color: #707183;">)</span>
</pre>
</div>
</section>
<section id="slide-orge43ea39">
<h5 id="orge43ea39">Eine objektorientierte Lösung &#x2026;</h5>
<ul>
<li>&#x2026; sollte die folgenden Regeln beachten:
<ul>
<li>Definition einer Klasse für Ausdrücke mit je einer abstrakten
Methode für jede Operation</li>
<li>Defintion einer Unterklasse für jede Datenvariante</li>
<li>In jeder der Unterklassen Definition einer Methode für jede
Operation; Gemeinsamkeiten könnten in der Oberklasse definiert
werden.</li>
<li>Die Implementierung erfolgt „zeilenweise”.</li>

</ul></li>
<li><p>
Teil 1 von <a href="./Aufgaben/aufgaben.html#/slide-aufgabeoopversusfp">Aufgabe (OOP versus FP)</a>
</p>
<blockquote>
<p>
Implementieren die das geschilderte Problem in einer
objektorientierten Sprache Ihrer Wahl!
</p>
</blockquote></li>

</ul>
</section>
<section id="slide-orgd09c00c">
<h5 id="orgd09c00c">Zwischenbilanz</h5>
<ul>
<li>Welche Lösung ist die bessere?</li>
<li>Oft eine Frage der persönlichen Sichtweise, ob es „natürlicher”
erscheint, das Problen zeilen- oder spaltenweise zu zerlegen</li>
<li>Für das Problem der Ausdrücke ist der funktionale Ansatz
möglicherweise übersichtlicher. Die verschiedenen Fälle der
<code>eval</code>-Funktion beieinander zu haben ist leichter überschaubar als
die Operationen für <code>ADD</code> oder <code>Negate</code>.</li>
<li>Für die Entwicklung einer graphischen Benutzungsoberfläche ist die
objektorientierte Sichtweise vielleicht besser: Hier möchte man eher
die Operationen einer bestimmten Datenart, wie z.&nbsp;B. einer
Menüleiste, beieinander zu haben, als alle bei einem Mausklick zu
berücksichtigenden Fälle.</li>

</ul>
</section>
<section id="slide-orgf758820">
<h5 id="orgf758820">Erweiterung des Programms um neue Datenvarianten und Operationen</h5>
<ul>
<li>Die Vor- und Nachteile der betrachteten Paradigmen werden
deutlicher, wenn das Programm erweitert werden muss.</li>
<li>Teil 2 von <a href="./Aufgaben/aufgaben.html#/slide-aufgabeoopversusfp">Aufgabe (OOP versus FP)</a>
<ol>
<li>Erweitern Sie beide Varianten des Programms um die neue Operation
<code>noNegConstants</code>, die alle negativen Konstanten in positive
verwandelt werden. (Fügen Sie also der Matrix eine neue Spalte hinzu.)</li>
<li>Erweitern Sie beide Varianten des Programms um die neue
Datenvariante <code>Mult</code> (in Analogie zu <code>Add</code>).(Fügen Sie also der
Matrix eine neue Zeile hinzu.)</li>
<li>Dokumentieren Sie den Implementierungsaufwand für beide
Erweiterungen.</li>

</ol></li>

</ul>
</section>
</section>
<section>
<section id="slide-org50c3332">
<h2 id="org50c3332">Metamorphose einer Beispielanwendung</h2>
<ul>
<li>von einer prozeduralen zu einer objektorientierten und einer funktionalen Lösung</li>
<li>unter Benutzung der hybriden Sprache Javascript</li>
<li>unter Verwendung von Materialien von <a href="https://github.com/rafd">Rafal Dittwald</a> <a class="org-ref-reference" href="#/slide-bibliography">[Dittwald2019]</a></li>

</ul>
</section>
<section id="slide-orga2f1d79">
<h3 id="orga2f1d79">Prozeduren, Methoden, Funktionen</h3>
<dl>
<dt>Prozedur</dt><dd>Unterprogramm</dd>
<dt>Methode</dt><dd>Prozedur innerhalb eines Objekts</dd>
<dt>Funktion</dt><dd>Prozedur, die
<ul>
<li>dynamisch erzeugt werden kann,</li>
<li>als Wert betrachtet werden kann (first class values),</li>
<li>keinen Namen haben muss,</li>
<li>idealerweise keine Nebeneffekte, keine Zustandsänderungen
hervorruft (pur),</li>
<li>aufgerufen mit den gleichen Argumenten immer das gleiche Resultat
liefert (pur)</li>

</ul></dd>

</dl>
</section>
<section id="slide-orga630b07">
<h3 id="orga630b07">Wir spielen <a href="https://www.pagat.com/misc/gops.html">GOPS</a></h3>

<div class="figure">
<p><img src="./Abbildungen/gops.png" alt="gops.png" width="800px" />
</p>
</div>
</section>
<section id="slide-orga324bc3">
<h3 id="orga324bc3">Prozedural-imperative Lösung</h3>

<div class="figure">
<p><img src="./Abbildungen/gops-proc.png" alt="gops-proc.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org71775b3">
<h3 id="org71775b3">Objektorientierte Lösung</h3>
<ul>
<li>Zustandsgrößen stiften Verwirrung, verstecken wir sie in Objekten.</li>
<li><p>
Ein objektorientiertes Programm ist ein System interagierender
Objekte:
</p>

<div class="figure">
<p><img src="./Abbildungen/gops-objects.png" alt="gops-objects.png" width="300px" />
</p>
</div></li>

</ul>
</section>
<section id="slide-org2fc32de">
<h3 id="org2fc32de">Wo sehen Sie hier Objekte?</h3>

<div class="figure">
<p><img src="./Abbildungen/gops-proc.png" alt="gops-proc.png" class="fragment roll-in" width="800px" />
</p>
</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-classes.png" alt="gops-classes.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-classes2.png" alt="gops-classes2.png" />
</p>
</div>

</div>
</section>
<section id="slide-org4755a72">
<h4 id="org4755a72">Definition von Klassen</h4>

<div class="figure">
<p><img src="./Abbildungen/gops-classes3.png" alt="gops-classes3.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org0ab228e">
<h3 id="org0ab228e">Funktionale Lösung</h3>
<ul>
<li>Vermeidung änderbarer Zustände (<i>mutable states</i>)</li>
<li>Vermeidung von Seiteneffekten</li>
<li><p>
ein funktionales Programm beschreibt einen Datenfluss von der
Eingabe zur Ausgabe:
</p>

<div class="figure">
<p><img src="./Abbildungen/gops-pipeline.png" alt="gops-pipeline.png" width="300px" />
</p>
</div></li>

</ul>
</section>
<section id="slide-orgba4eca0">
<h4 id="orgba4eca0">Vermeidungsstrategien</h4>

<div class="figure">
<p><img src="./Abbildungen/gops-vermeidungen.png" alt="gops-vermeidungen.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org4987b7f">
<h4 id="org4987b7f">Zustände, Änderungen, Seiteneffekte in der OO-Lösung</h4>

<div class="figure">
<p><img src="./Abbildungen/gops-oop-markiert.png" alt="gops-oop-markiert.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org284757f">
<h4 id="org284757f">Zustände, Änderungen, Seiteneffekte in der prozeduralen Lösung</h4>

<div class="figure">
<p><img src="./Abbildungen/gops-proz-markiert.png" alt="gops-proz-markiert.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org6192bea">
<h4 id="org6192bea">Migrationsschritte</h4>
<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-verschiebelogs1.png" alt="gops-verschiebelogs1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-verschiebelogs2.png" alt="gops-verschiebelogs2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom1.png" alt="gops-popRandom1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom2.png" alt="gops-popRandom2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom3.png" alt="gops-popRandom3.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom4.png" alt="gops-popRandom4.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom5.png" alt="gops-popRandom5.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom6.png" alt="gops-popRandom6.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom7.png" alt="gops-popRandom7.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom8.png" alt="gops-popRandom8.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom9.png" alt="gops-popRandom9.png" />
</p>
</div>

</div>
</section>
<section id="slide-org3f9de1c">
<h4 id="org3f9de1c">Zwischenstand</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom10.png" alt="gops-popRandom10.png" />
</p>
</div>

</div>
</section>
<section id="slide-orgef6aa77">
<h4 id="orgef6aa77">Weitere Migrationsschritte</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom11.png" alt="gops-popRandom11.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom12.png" alt="gops-popRandom12.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom13.png" alt="gops-popRandom13.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-popRandom14.png" alt="gops-popRandom14.png" />
</p>
</div>

</div>
</section>
<section id="slide-orgb4eb04c">
<h4 id="orgb4eb04c">Zwischenstand 2</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-zwischenstand2.png" alt="gops-zwischenstand2.png" />
</p>
</div>

</div>
</section>
<section id="slide-org9a79302">
<h4 id="org9a79302">Weitere Migrationsschritte</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-zustaende1.png" alt="gops-zustaende1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-zustaende2.png" alt="gops-zustaende2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate1.png" alt="gops-nextstate1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate2.png" alt="gops-nextstate2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate3.png" alt="gops-nextstate3.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate4.png" alt="gops-nextstate4.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate5.png" alt="gops-nextstate5.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-nextstate6.png" alt="gops-nextstate6.png" />
</p>
</div>

</div>
</section>
<section id="slide-org34c6427">
<h4 id="org34c6427">Zwischenstand 3</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-zwischenstand3.png" alt="gops-zwischenstand3.png" />
</p>
</div>

</div>
</section>
<section id="slide-orgaeef634">
<h4 id="orgaeef634">Letzte Migrationsschritte</h4>
<div width="800px" class="uebereinander">

<div class="figure">
<p><img src="./Abbildungen/gops-turnmessage1.png" alt="gops-turnmessage1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-turnmessage2.png" alt="gops-turnmessage2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-zustandsarray1.png" alt="gops-zustandsarray1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-zustandsarray2.png" alt="gops-zustandsarray2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport1.png" alt="gops-runreport1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport2.png" alt="gops-runreport2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport3.png" alt="gops-runreport3.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport4.png" alt="gops-runreport4.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport5.png" alt="gops-runreport5.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-runreport6.png" alt="gops-runreport6.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-rekursion1.png" alt="gops-rekursion1.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-rekursion2.png" alt="gops-rekursion2.png" />
</p>
</div>

</div>

<div class="fragment roll-in uebereinander" width="800px">

<div class="figure">
<p><img src="./Abbildungen/gops-rekursion3.png" alt="gops-rekursion3.png" />
</p>
</div>

</div>
</section>
<section id="slide-orgb0da14e">
<h4 id="orgb0da14e">Fazit</h4>

<div class="figure">
<p><img src="./Abbildungen/gops-schluss.png" alt="gops-schluss.png" width="800px" />
</p>
</div>
</section>
<section id="slide-org4fb4714">
<h5 id="org4fb4714">Antworten</h5>
<ul>
<li>tatsächlich etwas mehr Code aber nahezu ausschließlich aus reinen
Funktionen bestehend</li>
<li>Diese Art des Refactorings (Betrachtung von Zuständen,
Zustandsänderungen und Seiteneffekten) liefert
<ul>
<li>klare semantische Trennung</li>
<li>einfachste Testbarkeit</li>
<li>einfache „Argumentierbarkeit“ (reason about)
<ul>
<li>reine Funktionen können des Rest des Universums ignorieren</li>
<li>Referenztransparenz: Funktionsaufrufe können durch ihren Wert
ersetzt werden.</li>

</ul></li>
<li>Reine Funktionen können trivialerweise memoisiert werden.</li>
<li>Reine Funktionen können einfach parallelisiert werden.</li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orge41453d">
<h2 id="orge41453d">Funktionale Entwurfsmuster</h2>
</section>
<section id="slide-org6fce09c">
<h3 id="org6fce09c">Vorbemerkungen</h3>
<ul>
<li>Welche Entwurfsmuster kennen Sie?</li>
<li>Wozu dienen Entwurfsmuster?</li>
<li>Das berühmte Buch: <a class="org-ref-reference" href="#/slide-bibliography">[E.-Gamma:1995pd]</a></li>
<li><p>
These:
</p>
<blockquote>
<p>
Jedes Entwurfsmuster offenbart einen Mangel der verwendeten Programmiersprache.
</p>
</blockquote>
<p>
So fand <a href="https://en.wikipedia.org/wiki/Peter_Norvig">Peter Norvig</a> heraus, dass 16 der 23 Entwurfsmuster aus dem oben
genannten Buch in Sprachen wie Lisp verschwinden bzw. sich stark
vereinfachen lassen (<a class="org-ref-reference" href="#/slide-bibliography">[Norvig1998]</a>).
</p></li>
<li>Mehrere Entwurfsmuster behandeln bzw. implizieren Zustandsänderungen
und sind daher nicht auf die funktionale Programmierung übertragbar.</li>

</ul>
</section>
<section>
<ul>
<li>Viele (objektorientierte) Entwurfsmuster sind in funktionalen
Sprachen Idiome. So wird das Iterator-Muster in Sprachen wie LISP oder
ML nicht benötigt.</li>
<li><p>
Ein Bild, das in der Community kursiert (z.&nbsp;B. <a href="http://blog.cleancoder.com/uncle-bob/2014/11/24/FPvsOO.html">hier</a>):
</p>

<div class="figure">
<p><img src="./Abbildungen/fpvsoopattern.jpg" alt="fpvsoopattern.jpg" width="400px" />
</p>
</div></li>
<li>Eine Kategorie der Entwurfsmuster sind die Verhaltensmuster
(behavioural patterns). Charakteristisch für die Muster ist die
Beobachtung, dass sie Verben (Aktivitäten, Funktionen) in Substantive (Objekte)
verwandelt. Funktion werden in Objekte „verpackt“.</li>

</ul>
</section>
<section>
<ul>
<li>Damit werden häufig natürliche Konzepte der funktionalen
Programmierung für die Objektorientierung passend gemacht, häufig
auf Kosten von Lesbarkeit und Prägnanz.</li>

</ul>
</section>
<section id="slide-org9ea519c">
<h3 id="org9ea519c">Konkrete Muster</h3>
<div class="outline-text-3" id="text-org9ea519c">
</div>
</section>
<section id="slide-org8d7c5af">
<h4 id="org8d7c5af">Das Befehlsmuster (command pattern)</h4>
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Command Design Pattern ermöglicht die Modularisierung von Befehlen
und Aufrufen. Auf elegante Weise können Befehle rückgängig gemacht,
protokolliert oder in einer Warteschlange gelegt werden.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/command.jpg" alt="command.jpg" width="500px" />
</p>
</div>
</section>
<section id="slide-org2163bb7">
<h5 id="org2163bb7">Beispiel</h5>
<ul>
<li>Es werden verschiedene Commands betrachtet, die eine
Nachricht verarbeiten.</li>
<li><p>
Basis: ein Interface
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
      <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span>;
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li>Verschiedene Implementierungen des Interface:</li>

</ul>
</section>
<section>
<ol>
<li><p>
für das Logging
</p>
<div class="org-src-container">

<pre  class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Logger</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">Logger</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Logging: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>

</ol>
</section>
<section>
<ol>
<li value="2"><p>
Speichern der Nachricht
</p>
<div class="org-src-container">

<pre  class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">FileSaver</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">FileSaver</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Saving: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>

</ol>
</section>
<section>
<ol>
<li value="3"><p>
Versenden per Email
</p>
<div class="org-src-container">

<pre  class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Mailer</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">Mailer</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Sending: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>

</ol>
</section>
<section>
<ul>
<li><p>
Ein Objekt, das diese Commands ausführen kann:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Executor</span> <span style="color: #707183;">{</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">execute</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">List</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Command</span><span style="color: #909183;">&gt;</span> <span style="color: #BA36A5;">tasks</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">for</span> <span style="color: #909183;">(</span><span style="color: #6434A3;">Command</span> <span style="color: #BA36A5;">task</span> : tasks<span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
              task.run<span style="color: #709870;">()</span>;
          <span style="color: #909183;">}</span>
      <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li><p>
Ausführung einer Liste von Commands durch den <code>Executor</code>
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #6434A3;">List</span><span style="color: #707183;">&lt;</span><span style="color: #6434A3;">Command</span><span style="color: #707183;">&gt;</span> <span style="color: #BA36A5;">tasks</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span><span style="color: #707183;">&lt;&gt;()</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Logger</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Hi"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">FileSaver</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Cheers"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Mailer</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Bye"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;

  <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Executor</span><span style="color: #707183;">()</span>.execute<span style="color: #707183;">(</span> tasks <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Wie in <a class="org-ref-reference" href="#/slide-bibliography">[E.-Gamma:1995pd]</a> gefordert, werden Funktionen (die
auszuführenden Aktionen) in Objekte verpackt (die Commands, die
diese Aktionen ausführen).</li>

</ul>
</section>
<section>
<ul>
<li>Diese Indirektion hat keinen Vorteil, außer Funktionen in strikt
objektorientierter Weise behandeln zu können.</li>

</ul>
</section>
<section id="slide-org8b7927b">
<h5 id="org8b7927b">Die funktionale Version</h5>
<ul>
<li>Durch die Einführung von Lambda-Ausdrücken in <b>Java 8</b> ist es
möglich, beide Paradigmen (OO und FP) nahtlos miteinander zu verknüpfen.</li>
<li>Das <code>Command</code>-Interface wird nicht benötigt, stattdessen kann das
bekannte <code>Runnable</code>-Interface benutzt werden.</li>
<li><p>
Die drei <code>Command</code>-Implementierungen können in Java 8 prägnant durch drei als
statische Methoden implementierte Funktionen geschrieben werden:
</p>
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">log</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Logging: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>

  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">save</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Saving: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>

  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">send</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Sending: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li>Das „Signal-Rausch-Verhältnis” des Codes wird deutlich verbessert,
wenn man als Signal den Rumpf der Funktionen und als Rauschen den
Code, der zusätzlich benötigt wird, um aus den Funktionen Methoden zu
machen, betrachtet.</li>
<li><p>
Auch die <code>Executor</code>-Klasse kann durch eine statische Methode
implementiert werden, die eine Liste von <code>Runnables</code> als Argument
akzeptiert:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">execute</span><span style="color: #707183;">(</span><span style="color: #6434A3;">List</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Runnable</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">tasks</span> <span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      tasks.forEach<span style="color: #7388D6;">(</span> Runnable::run <span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>

</ul>
</section>
<section>
<ul>
<li><p>
Die Funktionen können nun wieder in eine Liste gepackt und wie zuvor
ausgeführt werden:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #6434A3;">List</span><span style="color: #707183;">&lt;</span><span style="color: #6434A3;">Runnable</span><span style="color: #707183;">&gt;</span> <span style="color: #BA36A5;">tasks</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span><span style="color: #707183;">&lt;&gt;()</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; log<span style="color: #7388D6;">(</span><span style="color: #008000;">"Hi"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; save<span style="color: #7388D6;">(</span><span style="color: #008000;">"Cheers"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; send<span style="color: #7388D6;">(</span><span style="color: #008000;">"Bye"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;

  execute<span style="color: #707183;">(</span> tasks <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Der Java-Compiler übersetzt die Lambda-Ausdrücke ohne Argumente, die
die statischen Methoden (<code>log</code>, <code>save</code>, <code>send</code>) ausführen, in
anonyme Implementierungen des <code>Runnable</code>-Interface, wodurch sie in
eine Liste von <code>Runnables</code> gepackt werden können.</li>

</ul>
</section>
<section id="slide-org3b378d4">
<h4 id="org3b378d4">Das Strategiemuster (strategy pattern)</h4>
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Strategy Design Pattern ermöglicht einer Klasse das flexible
Wechseln von alternativen Verhalten.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/strategy-schema.jpg" alt="strategy-schema.jpg" width="500px" />
</p>
</div>
</section>
<section id="slide-org20a5261">
<h5 id="org20a5261">Beispiel</h5>
<ul>
<li>Das Ziel des Strategiemusters besteht in der Verallgemeinerung einer
Prozedur durch Verwendung verschiedener austauschbarer Algorithmen.</li>
<li>Hier soll eine Prozedur verallgemeinert werden, die
<ul>
<li>einen Text verarbeitet,</li>
<li>ihn nach gegebenen Kriterien filtert und</li>
<li>nach einer Formatierung/Transformation ausdruckt.</li>

</ul></li>
<li>Es wird also die Verallgemeinerung von zwei Verhaltensweisen benötigt:
<ul>
<li>Filtern des Textes</li>
<li>Transformation des Textes</li>

</ul></li>
<li><p>
Im ersten Schritt werden Verhaltensweisen durch ein Interface
abstrahiert:
</p>
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
        <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span>;
        <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span>;
    <span style="color: #707183;">}</span>
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li>Danach ist es möglich, eine Klasse zu entwerfen, die eine allgemeine
Prozedur für die Publikation eines Textes implementiert.</li>
<li><p>
Ihr wird ein Exemplar eines <code>TextFormatter</code> Interface (die
Strategie) übergeben, das die Details, wie der Text gefiltert und
formatiert werden soll, kapselt:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">TextEditor</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #BA36A5;">textFormatter</span>;
 
    <span style="color: #0000FF;">public</span> <span style="color: #006699;">TextEditor</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">TextFormatter</span> <span style="color: #BA36A5;">textFormatter</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">this</span>.textFormatter = textFormatter;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">publishText</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
       <span style="color: #0000FF;">if</span> <span style="color: #909183;">(</span>textFormatter.filter<span style="color: #709870;">(</span> text <span style="color: #709870;">)</span><span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
           System.out.println<span style="color: #709870;">(</span> textFormatter.format<span style="color: #907373;">(</span> text <span style="color: #907373;">)</span> <span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span>
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li><b>Drei verschiedene Strategie-Implementierungen:</b>
<ol>
<li><p>
die einfachste Variante: der Text wird unverändert ausgedruckt.
</p>
<div class="org-src-container">

<pre  class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">PlainTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
      <span style="color: #D0372D;">@Override</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">return</span> <span style="color: #D0372D;">true</span>;
      <span style="color: #7388D6;">}</span>
 
      <span style="color: #D0372D;">@Override</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">return</span> text;
      <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div></li>

</ol></li>

</ul>
</section>
<section>
<ol>
<li value="2"><p>
Der Text wird Zeile für Zeile nach Fehlermeldungen
durchsucht. Es werden nur die Zeilen, die mit "ERROR" beginnen,
in Großbuchstaben ausgedruckt.
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ErrorTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.startsWith<span style="color: #909183;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toUpperCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ol>
</section>
<section>
<ol>
<li value="3"><p>
Text wird in Kleinbuchstaben ausgedruckt, sofern er kürzer
als zwanzig Zeichen ist.
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ShortTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.length<span style="color: #909183;">()</span> &lt; 20;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toLowerCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ol>
</section>
<section>
<ul>
<li><p>
Nun kann ein <code>TextEditor</code>-Exemplar angelegt und dabei mit einem
bestimmten <code>TextFormatter</code>-Exemplar versehen werden:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #6434A3;">TextEditor</span> <span style="color: #BA36A5;">textEditor</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">TextEditor</span><span style="color: #707183;">(</span> <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ErrorTextFormatter</span><span style="color: #7388D6;">()</span> <span style="color: #707183;">)</span>;
textEditor.publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span> <span style="color: #707183;">)</span>;
textEditor.publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span> <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Es stellt sich erneut die Frage, ob die Lösung nicht wortreicher
ist, als sie sein sollte.</li>
<li>Das einzig relevante Verhalten (das „Signal”) besteht in der Logik
der <code>publishText</code>-Methode der <code>Textformatter</code>-Klasse. Der Rest ist „Rauschen”.</li>

</ul>
</section>
<section id="slide-org9e893b8">
<h5 id="org9e893b8">Die funktionale Version</h5>
<ul>
<li>Die beiden durch den <code>Textformatter</code> definierten Verhaltensweisen
können problemlos in Form von zwei Funktionen an die
<code>publishText</code>-Methode übergeben werden:
<ul>
<li>ein Prädikat (<code>Predicate</code>) für die Filterung des Textes</li>
<li><p>
eine Transformationsfunktion <code>UnaryOperator</code>, die ein Objekt in ein anderes
desselben Typs verwandelt
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">publishText</span><span style="color: #707183;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span>, 
                                <span style="color: #6434A3;">Predicate</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">String</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">filter</span>, 
                                <span style="color: #6434A3;">UnaryOperator</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">String</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">format</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">if</span> <span style="color: #7388D6;">(</span>filter.test<span style="color: #909183;">(</span> text <span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        System.out.println<span style="color: #909183;">(</span> format.apply<span style="color: #709870;">(</span> text <span style="color: #709870;">)</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ul></li>

</ul>
</section>
<section>
<ul>
<li><p>
Benutzung von <code>publishText</code> als <code>PlainTextFormatter</code>:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span>, s -&gt; <span style="color: #D0372D;">true</span>, s -&gt; s <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li><p>
Benutzung von <code>publishText</code> als <code>ErrorTextFormatter</code>:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span>,
             s -&gt; s.startsWith<span style="color: #7388D6;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #7388D6;">)</span>, 
             String::toUpperCase <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>

</ul>
</section>
<section>
<ul>
<li><b>Möglicher Einwand:</b> Die Implementierung des <code>TextFormatter</code> als
Klasse ermöglicht einfacher, eine Bibliothek von Strategien zu
realisieren, anstatt ihre Implementierung bei jedem Aufruf erneut zu
implementieren.</li>
<li><p>
Funktionales Gegenmodell:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">TextUtil</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">acceptAll</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> <span style="color: #D0372D;">true</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">noFormatting</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">acceptErrors</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.startsWith<span style="color: #909183;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">formatError</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toUpperCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span> 
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li><p>
Benutzung der Klasse <code>TextUtil</code>: Anstelle der anonymen Funktionen
werden nun die dort definierten Methoden/Funktionen verwendet; z.&nbsp;B.:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span>, TextUtil::acceptAll, TextUtil::noFormatting <span style="color: #707183;">)</span>;

publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span>, 
             TextUtil::acceptErrors, TextUtil::formatError <span style="color: #707183;">)</span>;   
</pre>
</div>

</div></li>
<li>Diese Funktionen besitzen eine feinere Granularität als eine
Strategie-Klasse.</li>
<li>Damit ergibt sich eine bessere Wiederverwendbarkeit.</li>

</ul>
</section>
<section id="slide-org1a38057">
<h4 id="org1a38057">Das Beobachtermuster (observer pattern)</h4>
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Observer Entwurfsmuster ist für Situationen geeignet, in denen ein
oder mehrere Objekte benachrichtigt werden müssen, sobald sich der
Zustand eines bestimmten Objekts ändert.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/observer-def-schema.jpg" alt="observer-def-schema.jpg" width="500px" />
</p>
</div>
</section>
<section id="slide-org07c72a6">
<h5 id="org07c72a6">Beispiel</h5>
<ul>
<li>Das Entwurfsmuster erlaubt einem oder mehreren Objekten, über
auftretende Ereignisse informiert zu werden.</li>
<li><p>
Die elementare Abstraktion ist das <code>Listener</code>-Interface:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">Listener</span> <span style="color: #707183;">{</span>
    <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span>;
<span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li>Ein Objekt, das auf das Auftreten des Ereignisses (<code>event</code>)
reagieren soll, muss lediglich dieses Interface implementieren und
in der <code>onEvent</code>-Methode die erforderliche Reaktion festlegen.</li>

</ul>
</section>
<section>
<ul>
<li>Das Gegenstück zu einem beobachtenden Objekt ist das beobachtete
(beobachtbare, zu beobachtende):
ein <code>Observable</code>-Objekt.</li>
<li><p>
Ein Objekt, das an alle registrierten Beobachter (listeners) eine
Nachricht über ein aufgetretenes Ereignis sendet:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observable</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">Map</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Object</span>, <span style="color: #6434A3;">Listener</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">listeners</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ConcurrentHashMap</span><span style="color: #7388D6;">&lt;&gt;()</span>;
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">register</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span>, <span style="color: #6434A3;">Listener</span> <span style="color: #BA36A5;">listener</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.put<span style="color: #909183;">(</span>key, listener<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">unregister</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.remove<span style="color: #909183;">(</span>key<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">sendEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">for</span> <span style="color: #909183;">(</span><span style="color: #6434A3;">Listener</span> <span style="color: #006699;">listener</span> : listeners.values<span style="color: #709870;">()</span><span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
            listener.onEvent<span style="color: #709870;">(</span> event <span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span>
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li>Zwei (herkömmliche) Varianten, ein <code>Observer</code>-Objekt zu implementieren:
<ol>
<li><p>
durch eine anonyme, innere Klasse:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observer1</span> <span style="color: #707183;">{</span>
    <span style="color: #006699;">Observer1</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        observable.register<span style="color: #909183;">(</span> <span style="color: #0000FF;">this</span>, <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Listener</span><span style="color: #709870;">()</span> <span style="color: #709870;">{</span>
            <span style="color: #D0372D;">@Override</span>
            <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #907373;">(</span> <span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span> <span style="color: #907373;">)</span> <span style="color: #907373;">{</span>
                System.out.println<span style="color: #6276BA;">(</span>event<span style="color: #6276BA;">)</span>;
            <span style="color: #907373;">}</span>
        <span style="color: #709870;">}</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ol></li>

</ul>
</section>
<section>
<ol>
<li value="2"><p>
durch die direkte Implementierung des <code>Listener</code>-Interface:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observer2</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Listener</span> <span style="color: #707183;">{</span>
    <span style="color: #006699;">Observer2</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        observable.register<span style="color: #909183;">(</span> <span style="color: #0000FF;">this</span>, <span style="color: #0000FF;">this</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        System.out.println<span style="color: #909183;">(</span>event<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>

</div></li>

</ol>
<ul>
<li><p>
Beide Varianten können in der gleichen Weise benutzt werden:
</p>
<div class="small">
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observable</span><span style="color: #707183;">()</span>;
<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observer1</span><span style="color: #707183;">(</span> observable <span style="color: #707183;">)</span>;
<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observer2</span><span style="color: #707183;">(</span> observable <span style="color: #707183;">)</span>;
observable.sendEvent<span style="color: #707183;">(</span> <span style="color: #008000;">"Hello World!"</span> <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Auch hier wird das Kernproblem eines großen Teils der GoF-Muster
deutlich: Verben, die Aktionen beschreiben, müssen in Substantive
verwandelt werden: Klassen, die die Aktionen einwickeln.</li>

</ul>
</section>
<section id="slide-org61e9097">
<h5 id="org61e9097">Die funktionale Version</h5>
<ul>
<li><p>
Schritt 1: Ersetzen des <code>Listener</code>-Interface durch das semantisch
äquivalente <code>Consumer</code>-Interface:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observable</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">Map</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Object</span>, <span style="color: #6434A3;">Consumer</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Object</span><span style="color: #909183;">&gt;</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">listeners</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ConcurrentHashMap</span><span style="color: #7388D6;">&lt;&gt;()</span>;

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">register</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span>, <span style="color: #6434A3;">Consumer</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Object</span><span style="color: #909183;">&gt;</span> <span style="color: #BA36A5;">listener</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.put<span style="color: #909183;">(</span>key, listener<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">unregister</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.remove<span style="color: #909183;">(</span>key<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">sendEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.values<span style="color: #909183;">()</span>.forEach<span style="color: #909183;">(</span> listener -&gt; listener.accept<span style="color: #709870;">(</span> event <span style="color: #709870;">)</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>

</ul>
</section>
<section>
<ul>
<li>Schritt 2:
<ul>
<li>Die Implementierung der Listener durch eigene Klassen ist
nicht mehr notwendig.</li>
<li><p>
Die spezifische Reaktion auf das Eintreten eines Ereignisse kann
durch einen Lambda-Ausdruck oder einen Methoden-Verweis kodiert werden:
</p>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observable</span><span style="color: #707183;">()</span>;
observable.register<span style="color: #707183;">(</span> <span style="color: #008000;">"key1"</span>, e -&gt; System.out.println<span style="color: #7388D6;">(</span>e<span style="color: #7388D6;">)</span> <span style="color: #707183;">)</span>;
observable.register<span style="color: #707183;">(</span> <span style="color: #008000;">"key2"</span>, System.out::println <span style="color: #707183;">)</span>;
observable.sendEvent<span style="color: #707183;">(</span> <span style="color: #008000;">"Hello World!"</span> <span style="color: #707183;">)</span>;  
</pre>
</div></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-bibliography">
<h2 id="bibliography">Literaturverzeichnis</h2>
<ul class='org-ref-bib'><li><a id="Dittwald2019">[Dittwald2019]</a> <a name="Dittwald2019"></a>Dittwald, Solving Problems the Clojure Way, (2019), zuletzt aufgerufen am 9. 11. 2019: <a href="https://clojurenorth.com">https://clojurenorth.com</a> </li>
<li><a id="E.-Gamma:1995pd">[E.-Gamma:1995pd]</a> <a name="E.-Gamma:1995pd"></a>Erich Gamma, Richard Helm, Ralph Johnson & John Vlissides, Design Patterns: Elements of Reusable Object-Oriented Software, Addison-Wesley (1995).</li>
<li><a id="Norvig1998">[Norvig1998]</a> <a name="Norvig1998"></a>Peter Norvig, Design Patterns in Dynamic Languages, (1998), zuletzt aufgerufen am 10.09.2018: <a href="http://www.norvig.com/design-patterns/">http://www.norvig.com/design-patterns/</a> </li>
</ul>
</section>
</section>
</div>
</div>
<script src="./reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,
margin: 0.05,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'slide', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
 { src: './reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

,dependencies: [ { src: 'plugin/menu/menu.js', async: true }, { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true }, { src: 'reveal.js/plugin/search/search.js', async: true }   ] , menu: {hideMissingTitles: true}});
</script>
</body>
</html>
