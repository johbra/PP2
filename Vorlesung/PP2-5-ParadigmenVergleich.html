<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
<head>
<!-- 2019-07-27 Sat 18:11 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Funktionale versus objektorientierte Programmierung</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Johannes Brauer" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<link rel="stylesheet" type="text/css" href="mycss/mystyle.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Funktionale versus objektorientierte Programmierung
<br />
<span class="subtitle">Programmierparadigmen</span>
</h1>
<div id="outline-container-org3ae92b0" class="outline-2">
<h2 id="org3ae92b0">Ziele</h2>
<div class="outline-text-2" id="text-org3ae92b0">
<ul class="org-ul">
<li>Erkennen von Zusammenhängen zwischen verschiedenen
Programmierparadigmen, insbesondere zwischen der funktionalen und
der objektorientierte Programmierung</li>
<li>Erkennen der Kernkonzepte der Paradigmen</li>
<li>Verstehen von Dimensionen der Erweiterbarkeit von Programmen</li>
</ul>
</div>
</div>

<div id="outline-container-orgc211e52" class="outline-2">
<h2 id="orgc211e52">Funktionale versus objektorientierte Programmierung</h2>
<div class="outline-text-2" id="text-orgc211e52">
<blockquote>
<p>
Object oriented programs are offered as alternatives to correct ones…
— Edsger W. Dijkstra, pioneer of computer science
</p>
</blockquote>
</div>
<div id="outline-container-orgae80961" class="outline-3">
<h3 id="orgae80961">Ein wenig Historie</h3>
<div class="outline-text-3" id="text-orgae80961">

<div class="figure">
<p><img src="./Abbildungen/programmierung.png" alt="programmierung.png" width="700px" />
</p>
</div>
</div>
<div id="outline-container-orgad5553f" class="outline-4">
<h4 id="orgad5553f">1936</h4>
<div class="outline-text-4" id="text-orgad5553f">

<div class="figure">
<p><img src="./Abbildungen/alan-turing.jpg" alt="alan-turing.jpg" width="200px" />
</p>
</div>

<div class="figure">
<p><img src="./Abbildungen/entscheidungsproblem.png" alt="entscheidungsproblem.png" width="600px" />
</p>
</div>
<ul class="org-ul">
<li>Begriffe: Unterprogramm, Makro, code is data</li>
</ul>
</div>
</div>
<div id="outline-container-orgcda3839" class="outline-4">
<h4 id="orgcda3839">1945</h4>
<div class="outline-text-4" id="text-orgcda3839">
<ul class="org-ul">
<li>Turing schreibt Code. 
<ul class="org-ul">
<li>in Binärform</li>
<li>benutzt Integer-Zahlen (add) und boolesche Operationen</li>
<li>erfindet Unterprogramme einschl. Stack</li>
<li>erfindet Gleitkommazahlen</li>
</ul></li>
<li>Anzahl der Computer weltweit: \(O(1)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1)\).</li>
</ul>
</div>
</div>
<div id="outline-container-orgbde89ec" class="outline-4">
<h4 id="orgbde89ec">1953 Fortran</h4>
<div class="outline-text-4" id="text-orgbde89ec">

<div class="figure">
<p><img src="./Abbildungen/Fortran.png" alt="Fortran.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-org95f220e" class="outline-4">
<h4 id="org95f220e"></h4>
<div class="outline-text-4" id="text-org95f220e">

<div class="figure">
<p><img src="./Abbildungen/McCarthy.jpg" alt="McCarthy.jpg" />
</p>
</div>

<p>
Funktionale Programmierung
</p>
</div>
</div>

<div id="outline-container-orgfadb3e5" class="outline-4">
<h4 id="orgfadb3e5">1960</h4>
<div class="outline-text-4" id="text-orgfadb3e5">
<ul class="org-ul">
<li>Anzahl der Computer weltweit: \(O(1E2)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E3)\).</li>
</ul>
</div>
</div>
<div id="outline-container-org603ca20" class="outline-4">
<h4 id="org603ca20">1965</h4>
<div class="outline-text-4" id="text-org603ca20">
<ul class="org-ul">
<li>Anzahl der Computer weltweit: \(O(1E4)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E5)\).</li>
</ul>
</div>
</div>
<div id="outline-container-orgf7e4835" class="outline-4">
<h4 id="orgf7e4835">1966 Simula 1967</h4>
<div class="outline-text-4" id="text-orgf7e4835">
<p>
Ole-Johan Dahl, Kristen Nygard:
</p>


<div class="figure">
<p><img src="./Abbildungen/simuladahlnygard.gif" alt="simuladahlnygard.gif" width="400px" />
</p>
</div>

<p>
Objektorientierte Programmierung
</p>
</div>
</div>

<div id="outline-container-org915d68a" class="outline-4">
<h4 id="org915d68a">1968</h4>
<div class="outline-text-4" id="text-org915d68a">
<p>
Edsger Dijkstra:
</p>

<div class="nebeneinander">

<div class="figure">
<p><img src="./Abbildungen/dijkstra.jpg" alt="dijkstra.jpg" />
</p>
</div>

</div>
<div class="nebeneinander">

<div class="figure">
<p><img src="./Abbildungen/gotoharmfull.png" alt="gotoharmfull.png" />
</p>
</div>

</div>
<div class="clear">

</div>
<p>
Strukturierte Programmierung
</p>
</div>
</div>
</div>

<div id="outline-container-org7c872b9" class="outline-3">
<h3 id="org7c872b9">Drei Paradigmen</h3>
<div class="outline-text-3" id="text-org7c872b9">
<ul class="org-ul">
<li>1968 &#x2013; Strukturierte Programmierung. Edsger Dijkstra zeigt, wie der
Gebrauch von <code>GOTO</code>-Anweisungen durch <code>if/then/else</code> und <code>while</code>
ersetzt werden kann.</li>

<li>1966 &#x2013; Objektorientierte Programmierung. Ole-Johan Dahl und Kristen
Nygaard entwickeln die erste OO-Sprache: <i>Simula-67</i>. Durch die
Einführung der Polymorphie konnten die <code>function pointers</code>
eliminiert werden.</li>

<li>1957 &#x2013; Funktionale Programmierung. John McCarthy erfindet
Lisp. Lisp basiert auf dem Lambda-Kalkül, entwickelt von Alonzo
Church in den 1930ern. Ein wesentliches Merkmal: Es gibt keine Zuweisung.</li>
</ul>

<p>
Drei Paradigmen, drei Einschränkungen
</p>
</div>

<div id="outline-container-org0019f6e" class="outline-4">
<h4 id="org0019f6e">1970</h4>
<div class="outline-text-4" id="text-org0019f6e">
<ul class="org-ul">
<li>Anzahl der Computer weltweit: \(O(1E5)\).</li>
<li>Anzahl der Programmierer weltweit: \(O(1E6)\).</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc09e9ed" class="outline-3">
<h3 id="orgc09e9ed">Was bringt die funktionale Programmierung?</h3>
<div class="outline-text-3" id="text-orgc09e9ed">
<ul class="org-ul">
<li>Worin besteht der Kerngedanke der funktionalen Programmierung?</li>
</ul>
</div>
</div>
<div id="outline-container-org7baf65e" class="outline-3">
<h3 id="org7baf65e">Fehlen der Mutation</h3>
<div class="outline-text-3" id="text-org7baf65e">
<ul class="org-ul">
<li>Wie kann das „Fehlen von Etwas” ein wichtiges Feature eines
Programmierparadigmas sein?</li>
<li>Das Fehlen von Zuweisungen ermöglicht das Schreiben von Programmcode
ohne befürchten zu müssen, das anderer Code den eigenen negativ
beeinflusst.</li>
<li>Nicht änderbare Datenstrukturen sind das wichtigste „non-feature“,
das eine Programmiersprache haben kann.</li>
<li>Auf einen wichtigen Vorteil soll hier besonders eingegangen werden:
Sharing und Aliasing werden irrelevant.</li>
</ul>
</div>

<div id="outline-container-orgf0edd7b" class="outline-4">
<h4 id="orgf0edd7b">Beispiel: Sortieren eines Vektors</h4>
<div class="outline-text-4" id="text-orgf0edd7b">
<div class="small">
<div class="org-src-container">
<pre class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">sort-pair</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>pair<span style="color: #909183;">]</span>
     <span style="color: #909183;">(</span><span style="color: #0000FF;">if</span> <span style="color: #709870;">(</span>&lt; <span style="color: #907373;">(</span>pair 0<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>pair 1<span style="color: #907373;">)</span><span style="color: #709870;">)</span> 
         pair
         <span style="color: #709870;">[</span><span style="color: #907373;">(</span>pair 1<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>pair 0<span style="color: #907373;">)</span><span style="color: #709870;">]</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div>

<ul class="org-ul">
<li>Die Funktion liefert im <code>else</code>-Fall einen neu erzeugten Vektor.</li>
<li>Aber was passiert im <code>then</code>-Fall? 
<ul class="org-ul">
<li>Erhalten wir eine Kopie des an die Funktion übergebenen Vektors
oder</li>
<li>gibt die Funktion ein Alias auf denselben Vektor zurück?</li>
</ul></li>
<li>Bei Fehlen von Mutation ist die Frage irrelevant.</li>
</ul>
</div>
</div>

<div id="outline-container-org80003f1" class="outline-4">
<h4 id="org80003f1">Beispiel: Funktion append</h4>
<div class="outline-text-4" id="text-org80003f1">
<div class="small">
<div class="org-src-container">
<pre class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">append</span> 
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>xs ys<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span> 
      <span style="color: #709870;">(</span><span style="color: #006FE0;">empty?</span> xs<span style="color: #709870;">)</span> ys
      <span style="color: #D0372D;">:else</span> <span style="color: #709870;">(</span><span style="color: #006FE0;">cons</span> <span style="color: #907373;">(</span><span style="color: #006FE0;">first</span> xs<span style="color: #907373;">)</span> <span style="color: #907373;">(</span>append <span style="color: #6276BA;">(</span><span style="color: #006FE0;">rest</span> xs<span style="color: #6276BA;">)</span> ys<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div>
<ul class="org-ul">
<li>Frage: Teilt die zurückgegebene Liste irgendwelche Elemente mit den
Argumentlisten?</li>
<li>Antwort 1: Es spielt keine Rolle, solange kein Aufrufer das
feststellen kann.</li>
<li>Antwort 2: Ja, die neue Liste „wiederverwendet” alle Elemente von
<code>ys</code>. Das spart Speicherplatz und Rechenzeit.</li>
<li>Ein Problem entstünde nur dann, wenn nachträglich die Liste <code>ys</code>
verändert werden könnte.</li>
<li>Unveränderliche Daten erleichtern das Schreiben eleganter
Algorithmen erheblich.</li>
</ul>
<ul class="org-ul">
<li>Auch die Funktion <code>rest</code> teilt „dankenswerterweise” ihr Ergebnis
mit ihrer Argumentliste (bis auf das erste Element).</li>
<li>In der objektorientierten Programmierung, wo intensiv von
Verweissemantik und Mutation Gebrauch gemacht wird, muss die
Programmiererin sich mit den Fragen beschäftigen, ob Verweise auf
alte Objekte genutzt oder neue Objekte erzeugt werden.</li>
</ul>
</div>
</div>

<div id="outline-container-orgfd73736" class="outline-4">
<h4 id="orgfd73736">Beispiel: Ein Java-Programm</h4>
<div class="outline-text-4" id="text-orgfd73736">
<ul class="org-ul">
<li><p>
Ein inzwischen behobenes Sicherheitsproblem in einer Java library:
</p>
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ProtectedResource</span> <span style="color: #707183;">{</span>
     <span style="color: #0000FF;">private</span> <span style="color: #6434A3;">Resource</span> <span style="color: #BA36A5;">theResource</span> = ...;
     <span style="color: #0000FF;">private</span> <span style="color: #6434A3;">String</span><span style="color: #7388D6;">[]</span> <span style="color: #BA36A5;">allowedUsers</span> = ...;
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span><span style="color: #7388D6;">[]</span> <span style="color: #006699;">getAllowedUsers</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> allowedUsers;
     <span style="color: #7388D6;">}</span>
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">currentUser</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span>
     <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">useTheResource</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">for</span><span style="color: #909183;">(</span><span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">i</span>=0; i &lt; allowedUsers.<span style="color: #6434A3;">length</span>; i++<span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
           <span style="color: #0000FF;">if</span><span style="color: #709870;">(</span>currentUser<span style="color: #907373;">()</span>.equals<span style="color: #907373;">(</span>allowedUsers<span style="color: #6276BA;">[</span>i<span style="color: #6276BA;">]</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span> <span style="color: #709870;">{</span>
               ... <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">access allowed: use it</span>
               <span style="color: #0000FF;">return</span>; 
           <span style="color: #709870;">}</span>
        <span style="color: #909183;">}</span>
        <span style="color: #0000FF;">throw</span> <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">IllegalAccessException</span><span style="color: #909183;">()</span>;
     <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div></li>

<li>Problem: <code>getAllowedUsers</code> gibt einen Verweis auf das Array
<code>allowedUsers</code> zurück.</li>
<li>Damit ist <code>getAllowedUsers()[0] = currentUser()</code> möglich.</li>
<li>Abhilfe?</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgdb36b6c" class="outline-3">
<h3 id="orgdb36b6c">Integration von Daten und Funktionen &#x2013; Übergang zum Objektbegriff</h3>
<div class="outline-text-3" id="text-orgdb36b6c">
<p>
(bereits in EidP behandelt!)
</p>
</div>
<div id="outline-container-org5038c32" class="outline-4">
<h4 id="org5038c32">Funktionen mit Funktionen als Resultat</h4>
<div class="outline-text-4" id="text-org5038c32">
<p>
Beispiele aus dem letzten Semester:
</p>
<ul class="org-ul">
<li><p>
Was liefert der Ausdruck <code>(inc 3)</code>, wenn die Funktion <code>inc</code> wie folgt
definiert ist?
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-clojure">   <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">inc</span> 
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>n<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #709870;">[</span>z<span style="color: #709870;">]</span> <span style="color: #709870;">(</span>+ z n<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>
<li><p>
Welches Resultat liefert eine Anwendung der Funktion <code>dot</code>?
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-clojure">   <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">dot</span>
      <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>f g<span style="color: #909183;">]</span> <span style="color: #909183;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #709870;">[</span>x<span style="color: #709870;">]</span> <span style="color: #709870;">(</span>f <span style="color: #907373;">(</span>g x<span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>
</ul>
</div>
</div>
<div id="outline-container-org4c0c12c" class="outline-4">
<h4 id="org4c0c12c">Was ist ein Objekt?</h4>
<div class="outline-text-4" id="text-org4c0c12c">
<ul class="org-ul">
<li>Objekte im Sinne der „objektorientierten Programmierung” sind
nichts weiter als Funktionen mit „internen” Daten.</li>
<li><p>
So gesehen liefert ein Ausdruck der Art
</p>
<pre class="example">
(def inc-obj (inc 3))
</pre>

<p>
ein Objekt (eine Funktion) mit dem internen Datum (Zustand) <b>3</b>.
</p></li>
<li>Die Funktion bezeichnet man in der objektorientierten Programmierung
auch als <i>Methode</i>.</li>
<li>Durch den Ausdruck <code>(inc-obj 7)</code> 
wird die Methode aktiviert (die Funktion aufgerufen). Sie verlangt
ein Argument.</li>
<li><code>inc-obj</code> ist ein sehr primitives Objekt mit nur einer (unveränderlichen)
Zustandsgrößen und einer Methode.</li>
</ul>
</div>
</div>
<div id="outline-container-org8812082" class="outline-4">
<h4 id="org8812082">Ein etwas interessanteres Objekt</h4>
<div class="outline-text-4" id="text-org8812082">
<div class="org-src-container">
<pre class="src src-clojure"><span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">person</span>
  <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>name vorname<span style="color: #909183;">]</span>
    <span style="color: #909183;">(</span><span style="color: #0000FF;">let</span> <span style="color: #709870;">[</span>get-name    <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span> name<span style="color: #907373;">)</span>
          get-vorname <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span>vorname<span style="color: #907373;">)</span>
          vollname    <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[]</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">str</span> vorname <span style="color: #008000;">" "</span> name<span style="color: #6276BA;">)</span><span style="color: #907373;">)</span>
          gruss       <span style="color: #907373;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #6276BA;">[</span>g<span style="color: #6276BA;">]</span> <span style="color: #6276BA;">(</span><span style="color: #006FE0;">str</span> g <span style="color: #008000;">" "</span> <span style="color: #858580;">(</span>vollname<span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">]</span>
      <span style="color: #709870;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #907373;">[</span>nachricht<span style="color: #907373;">]</span>
        <span style="color: #907373;">(</span><span style="color: #0000FF;">cond</span>
          <span style="color: #6276BA;">(</span>= nachricht 'get-name<span style="color: #6276BA;">)</span> get-name
          <span style="color: #6276BA;">(</span>= nachricht 'get-vorname<span style="color: #6276BA;">)</span> get-vorname
          <span style="color: #6276BA;">(</span>= nachricht 'get-vollname<span style="color: #6276BA;">)</span> vollname
          <span style="color: #6276BA;">(</span>= nachricht 'gruss<span style="color: #6276BA;">)</span> gruss
          <span style="color: #D0372D;">:else</span> <span style="color: #6276BA;">(</span><span style="color: #0000FF;">throw</span> <span style="color: #858580;">(</span>Exception. <span style="color: #008000;">"unbekannte Nachricht"</span><span style="color: #858580;">)</span><span style="color: #6276BA;">)</span><span style="color: #907373;">)</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>Ein Aufruf der Funktion <code>person</code> liefert ein „Objekt” mit 
<ul class="org-ul">
<li>zwei Zustandsgrößen (<code>name</code>, <code>vorname</code>) und</li>
<li>vier Methoden: <code>get-name</code>, <code>get-vorname</code>, <code>vollname</code> und <code>gruss</code></li>
</ul></li>
</ul>
<ul class="org-ul">
<li>„In Wirklichkeit” liefert ein Aufruf der Funktion <code>person</code> eine
Verteilfunktion, die anhand ihres Parameters <code>nachricht</code> ermittelt,
welche der Methoden aufzurufen ist.</li>
</ul>
</div>
</div>

<div id="outline-container-orgbca14f5" class="outline-4">
<h4 id="orgbca14f5">Anwendungen des <code>person</code>-Objekts</h4>
<div class="outline-text-4" id="text-orgbca14f5">
<div class="org-src-container">
<pre class="src src-clojure"><span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">Objekterzeugung:</span>
<span style="color: #707183;">(</span><span style="color: #0000FF;">define</span> <span style="color: #006699;">p1</span> <span style="color: #7388D6;">(</span>person <span style="color: #008000;">"Gans"</span> <span style="color: #008000;">"Gustav"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-vorname<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>     <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gustav"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-name<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>        <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gans"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'get-vollname<span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>    <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "Gustav Gans"</span>
<span style="color: #707183;">(</span><span style="color: #7388D6;">(</span>p1 'gruss<span style="color: #7388D6;">)</span> <span style="color: #008000;">"hallo"</span><span style="color: #707183;">)</span>   <span style="color: #8D8D84;">;;</span><span style="color: #8D8D84; font-style: italic;">=&gt; "hallo Gustav Gans"</span>
<span style="color: #707183;">(</span>p1 'x<span style="color: #707183;">)</span>                 <span style="color: #8D8D84;">;; </span><span style="color: #8D8D84; font-style: italic;">error</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2f2bec" class="outline-4">
<h4 id="orgf2f2bec">Java-Klasse <code>Person</code></h4>
<div class="outline-text-4" id="text-orgf2f2bec">
<div class="org-src-container">
<pre class="src src-java"> <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Person</span>
<span style="color: #707183;">{</span>
   <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">vorname</span>, <span style="color: #BA36A5;">name</span>;

    <span style="color: #0000FF;">public</span> <span style="color: #006699;">Person</span> <span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">n</span>, <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">v</span><span style="color: #7388D6;">)</span>
    <span style="color: #7388D6;">{</span>
        vorname = v;
        name = n;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">get_name</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> name;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">get_vorname</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> vorname;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">vollname</span><span style="color: #7388D6;">()</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> vorname + <span style="color: #008000;">" "</span> + name;
    <span style="color: #7388D6;">}</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">gruss</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">gruss</span><span style="color: #7388D6;">)</span>
    <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> gruss + <span style="color: #008000;">" "</span> + <span style="color: #0000FF;">this</span>.vollname<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0fee50f" class="outline-4">
<h4 id="org0fee50f">Zusammenfassung</h4>
<div class="outline-text-4" id="text-org0fee50f">
<ul class="org-ul">
<li>Für die objektorientierte Programmierung bedarf es keiner speziellen
Programmiersprachen.</li>
<li>Objektorientierung besteht nur aus einer Reihe von Konventionen zum
Umgang mit Daten.</li>
<li>Diese Konventionen werden von objektorientierten Sprachen explizit
und implizit unterstützt. Z. B. muss die Verteilfunktion nicht
selbst programmiert werden.</li>
<li><p>
Objekte sind nichts weiter als
</p>
<ul class="org-ul">
<li>eine Menge von <code>Name-&gt;Wert</code>-Abbildungen</li>
<li>eine Reihe von Funktionen, die solche Abbildungen als erstes
Argument akzeptieren und</li>
<li>eine Verteilfunktion, die ermittelt, welche dieser Funtkion
aufzurufen ist.</li>
</ul>
<ul class="org-ul">
<li>ergänzt um:</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0d4d87a" class="outline-3">
<h3 id="org0d4d87a">Erweiterbarkeit von Programmen</h3>
<div class="outline-text-3" id="text-org0d4d87a">
</div>
<div id="outline-container-org2a4b888" class="outline-4">
<h4 id="org2a4b888">Identifizierung des Problems</h4>
<div class="outline-text-4" id="text-org2a4b888">
</div>
<div id="outline-container-orgbe98add" class="outline-5">
<h5 id="orgbe98add">Objektorientierte Programmierung &#x2026;</h5>
<div class="outline-text-5" id="text-orgbe98add">
<ul class="org-ul">
<li>&#x2026; ist gekennzeichnet durch dynamische Bindung und Polymorphie.</li>
<li><p>
Polymorphie-Ansatz der meisten OO-Sprachen:
</p>
<ul class="org-ul">
<li>Methoden werden innerhalb von Klassen definiert.</li>
<li>Methodenaktivierung durch „Senden von Nachrichten”: Die zu
aktivierende Methode wird anhand der Klassenzugehörigkeit des
Empfängerobjekts bestimmt.</li>
</ul>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Rechteck</span> <span style="color: #707183;">{</span>
     <span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">breite</span>, <span style="color: #BA36A5;">hoehe</span>;
     <span style="color: #6434A3;">int</span> <span style="color: #006699;">flaeche</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span><span style="color: #707183;">}</span>

   <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Kreis</span> <span style="color: #707183;">{</span>
      <span style="color: #6434A3;">int</span> <span style="color: #BA36A5;">radius</span>;
      <span style="color: #6434A3;">int</span> <span style="color: #006699;">flaeche</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span> ... <span style="color: #7388D6;">}</span><span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
</ul>

<ul class="org-ul">
<li>Jeder „Datentyp” definiert seine Operationen.</li>
<li><b>Problem</b>: Datentypen können ohne Zugriff auf den Quellcode nicht erweitert werden.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc1d09be" class="outline-5">
<h5 id="orgc1d09be">Funktionale Programmierung &#x2026;</h5>
<div class="outline-text-5" id="text-orgc1d09be">
<ul class="org-ul">
<li><p>
&#x2026; ist gekennzeichnet durch Funktionen als Werte erster Ordnung und
die Abwesenheit von Seiteneffekten. 
</p>
<ul class="org-ul">
<li>Funktionen enthalten Fallunterscheidungen für Datentypen</li>
</ul>
<div class="small">
<div class="org-src-container">
<pre class="src src-clojure">  <span style="color: #707183;">(</span><span style="color: #0000FF;">def</span> <span style="color: #BA36A5;">figur-flaeche</span>
    <span style="color: #7388D6;">(</span><span style="color: #0000FF;">fn</span> <span style="color: #909183;">[</span>f<span style="color: #909183;">]</span>
      <span style="color: #909183;">(</span><span style="color: #0000FF;">cond</span>
        <span style="color: #709870;">(</span>kreis? f<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>kreis-flaeche f<span style="color: #709870;">)</span>
        <span style="color: #709870;">(</span>rechteck? f<span style="color: #709870;">)</span> <span style="color: #709870;">(</span>rechteck-flaeche f<span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>
</pre>
</div>

</div></li>
<li><b>Problem</b>: Hinzufügen eines neuen Datentyps bedeutet: Alle vorhanden
Figur-Funktionen müssen angepasst werden.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgac00538" class="outline-4">
<h4 id="orgac00538">Objektorientierte versus funktionale Zerlegung</h4>
<div class="outline-text-4" id="text-orgac00538">
<ul class="org-ul">
<li>Rückgriff auf das Problem der Verarbeitung einer kleinen „Sprache”
über arithmetische Ausdrücke (vgl. <a href="./Aufgaben/aufgaben.html#aufgabemustervergleich">Aufgabe Mustervergleich</a>).</li>
<li>In der funktionalen Programmierung werden üblicherweise Programme
durch Zerlegung in Funktionen für die auszuführenden Operationen zerlegt.</li>
<li>In der objektorientierten Programmierung werden Programme in Klassen
zerlegt, die Verhalten für bestimmte Arten von Daten bereitstellen.</li>
<li>Die folgenden Betrachtungen sollen einen Eindruck vermitteln, welche
Probleme mit der Erweiterung von Programmen verbunden sein können
und inwieweit diese mit dem verwendeten Paradigma in Verbindung
stehen.</li>
</ul>
</div>
<div id="outline-container-org8650330" class="outline-5">
<h5 id="problemarithmeischeausdruecke">Problemspezifikation</h5>
<div class="outline-text-5" id="text-problemarithmeischeausdruecke">
<ul class="org-ul">
<li>Die arithmetischen Ausdrücke bestehen aus ganzzahligen Werten,
Negationen und Additionen.</li>
<li>Für diese Ausdrücke sollen die Operationen
<ul class="org-ul">
<li>Auswertung (Bestimmung des Zahlenwerts)</li>
<li>Umwandlung in eine Zeichenkettendarstellung</li>
<li>Bestimmung, ob der Ausdruck die Konstante 0 enthält</li>
</ul></li>
<li><p>
Die Konstellation kann durch diese Matrix zusammengefasst werden.
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">eval</td>
<td class="org-left">toString</td>
<td class="org-left">hasZero</td>
</tr>

<tr>
<td class="org-left">Constant</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Add</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Negation</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table></li>
<li>Gleichgültig welches Paradigma benutzt werden soll, es muss für
jedes der neun Felder in der Matrix das geeignete Verhalten bestimmt
werden.</li>
</ul>
</div>
</div>
<div id="outline-container-org333e1ca" class="outline-5">
<h5 id="org333e1ca">Funktionale Lösung in ML</h5>
<div class="outline-text-5" id="text-org333e1ca">
<ul class="org-ul">
<li>Die drei Datenarten werden an einer Stelle definiert.</li>
<li>Die Implementierung der Operationen erfolgt „spaltenweise”.</li>
</ul>
<div class="org-src-container">
<pre class="src src-sml"><span style="color: #0000FF;">datatype</span> <span style="font-weight: bold;">exp</span> = 
         Constant    <span style="color: #0000FF;">of</span> int
         | Negate <span style="color: #0000FF;">of</span> exp 
         | Add    <span style="color: #0000FF;">of</span> exp * exp 

<span style="color: #0000FF;">exception</span> BadResult <span style="color: #0000FF;">of</span> string

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">eval</span> e = 
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant _ =&gt; e
      | Negate e1  =&gt; <span style="color: #707183;">(</span><span style="color: #0000FF;">case</span> eval e1 <span style="color: #0000FF;">of</span> 
                            Constant i =&gt; Constant <span style="color: #7388D6;">(</span>~i<span style="color: #7388D6;">)</span>
                          | _ =&gt; <span style="color: #0000FF;">raise</span> BadResult <span style="color: #008000;">"non-int in negation"</span><span style="color: #707183;">)</span>
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span> =&gt; <span style="color: #707183;">(</span><span style="color: #0000FF;">case</span> <span style="color: #7388D6;">(</span>eval e1, eval e2<span style="color: #7388D6;">)</span> <span style="color: #0000FF;">of</span>
                           <span style="color: #7388D6;">(</span>Constant i, Constant j<span style="color: #7388D6;">)</span> =&gt; Constant <span style="color: #7388D6;">(</span>i+j<span style="color: #7388D6;">)</span>
                           | _ =&gt; <span style="color: #0000FF;">raise</span> BadResult <span style="color: #008000;">"non-ints in addition"</span><span style="color: #707183;">)</span>

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">toString</span> e =
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant i  =&gt; Int.toString i
      | Negate e1   =&gt; <span style="color: #008000;">"-("</span> ^ <span style="color: #707183;">(</span>toString e1<span style="color: #707183;">)</span> ^ <span style="color: #008000;">")"</span>
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span>  =&gt; <span style="color: #008000;">"("</span>  ^ <span style="color: #707183;">(</span>toString e1<span style="color: #707183;">)</span> ^ <span style="color: #008000;">" + "</span> ^ <span style="color: #707183;">(</span>toString e2<span style="color: #707183;">)</span> ^ <span style="color: #008000;">")"</span>

<span style="color: #0000FF;">fun</span> <span style="color: #006699;">hasZero</span> e =
    <span style="color: #0000FF;">case</span> e <span style="color: #0000FF;">of</span>
        Constant i       =&gt; i=0 
      | Negate e1   =&gt; hasZero e1
      | Add<span style="color: #707183;">(</span>e1,e2<span style="color: #707183;">)</span>  =&gt; <span style="color: #707183;">(</span>hasZero e1<span style="color: #707183;">)</span> <span style="color: #0000FF;">orelse</span> <span style="color: #707183;">(</span>hasZero e2<span style="color: #707183;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge4e5306" class="outline-5">
<h5 id="orge4e5306">Eine objektorientierte Lösung &#x2026;</h5>
<div class="outline-text-5" id="text-orge4e5306">
<ul class="org-ul">
<li>&#x2026; sollte die folgenden Regeln beachten:
<ul class="org-ul">
<li>Definition einer Klasse für Ausdrücke mit je einer abstrakten
Methode für jede Operation</li>
<li>Defintion einer Unterklasse für jede Datenvariante</li>
<li>In jeder der Unterklassen Definition einer Methode für jede
Operation; Gemeinsamkeiten könnten in der Oberklasse definiert
werden.</li>
<li>Die Implementierung erfolgt „zeilenweise”.</li>
</ul></li>
<li><p>
Teil 1 von <a href="./Aufgaben/aufgaben.html#aufgabeoopversusfp">Aufgabe (OOP versus FP)</a>
</p>
<blockquote>
<p>
Implementieren die das geschilderte Problem in einer
objektorientierten Sprache Ihrer Wahl!
</p>
</blockquote></li>
</ul>
</div>
</div>
<div id="outline-container-orgbc1aa1b" class="outline-5">
<h5 id="orgbc1aa1b">Zwischenbilanz</h5>
<div class="outline-text-5" id="text-orgbc1aa1b">
<ul class="org-ul">
<li>Welche Lösung ist die bessere?</li>
<li>Oft eine Frage der persönlichen Sichtweise, ob es „natürlicher”
erscheint, das Problen zeilen- oder spaltenweise zu zerlegen</li>
<li>Für das Problem der Ausdrücke ist der funktionale Ansatz
möglicherweise übersichtlicher. Die verschiedenen Fälle der
<code>eval</code>-Funktion beieinander zu haben ist leichter überschaubar als
die Operationen für <code>ADD</code> oder <code>Negate</code>.</li>
<li>Für die Entwicklung einer graphischen Benutzungsoberfläche ist die
objektorientierte Sichtweise vielleicht besser: Hier möchte man eher
die Operationen einer bestimmten Datenart, wie z.&nbsp;B. einer
Menüleiste, beieinander zu haben, als alle bei einem Mausklick zu
berücksichtigenden Fälle.</li>
</ul>
</div>
</div>
<div id="outline-container-org9f93784" class="outline-5">
<h5 id="org9f93784">Erweiterung des Programms um neue Datenvarianten und Operationen</h5>
<div class="outline-text-5" id="text-org9f93784">
<ul class="org-ul">
<li>Die Vor- und Nachteile der betrachteten Paradigmen werden
deutlicher, wenn das Programm erweitert werden muss.</li>
<li>Teil 2 von <a href="./Aufgaben/aufgaben.html#aufgabeoopversusfp">Aufgabe (OOP versus FP)</a>
<ol class="org-ol">
<li>Erweitern Sie beide Varianten des Programms um die neue Operation
<code>noNegConstants</code>, die alle negativen Konstanten in positive
verwandelt werden. (Fügen Sie also der Matrix eine neue Spalte hinzu.)</li>
<li>Erweitern Sie beide Varianten des Programms um die neue
Datenvariante <code>Mult</code> (in Analogie zu <code>Add</code>).(Fügen Sie also der
Matrix eine neue Zeile hinzu.)</li>
<li>Dokumentieren Sie den Implementierungsaufwand für beide Erweiterungen.</li>
</ol></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orga56b888" class="outline-2">
<h2 id="orga56b888">Funktionale Entwurfsmuster</h2>
<div class="outline-text-2" id="text-orga56b888">
</div>
<div id="outline-container-org725a7cc" class="outline-3">
<h3 id="org725a7cc">Vorbemerkungen</h3>
<div class="outline-text-3" id="text-org725a7cc">
<ul class="org-ul">
<li>Welche Entwurfsmuster kennen Sie?</li>
<li>Wozu dienen Entwurfsmuster?</li>
<li>Das berühmte Buch: <a class="org-ref-reference" href="#/slide-bibliography">[E.-Gamma:1995pd]</a></li>
<li><p>
These:
</p>
<blockquote>
<p>
Jedes Entwurfsmuster offenbart einen Mangel der verwendeten Programmiersprache.
</p>
</blockquote>
<p>
So fand <a href="https://en.wikipedia.org/wiki/Peter_Norvig">Peter Norvig</a> heraus, dass 16 der 23 Entwurfsmuster aus dem oben
genannten Buch in Sprachen wie Lisp verschwinden bzw. sich stark
vereinfachen lassen (<a class="org-ref-reference" href="#/slide-bibliography">[Norvig1998]</a>).
</p></li>
<li>Mehrere Entwurfsmuster behandeln bzw. implizieren Zustandsänderungen
und sind daher nicht auf die funktionale Programmierung übertragbar.</li>
</ul>
<ul class="org-ul">
<li>Viele (objektorientierte) Entwurfsmuster sind in funktionalen
Sprachen Idiome. So wird das Iterator-Muster in Sprachen wie LISP oder
ML nicht benötigt.</li>
<li><p>
Ein Bild, das in der Community kursiert (z.&nbsp;B. <a href="http://blog.cleancoder.com/uncle-bob/2014/11/24/FPvsOO.html">hier</a>):
</p>

<div class="figure">
<p><img src="./Abbildungen/fpvsoopattern.jpg" alt="fpvsoopattern.jpg" width="400px" />
</p>
</div></li>
<li>Eine Kategorie der Entwurfsmuster sind die Verhaltensmuster
(behavioural patterns). Charakteristisch für die Muster ist die
Beobachtung, dass sie Verben (Aktivitäten, Funktionen) in Substantive (Objekte)
verwandelt. Funktion werden in Objekte „verpackt“.</li>
</ul>
<ul class="org-ul">
<li>Damit werden häufig natürliche Konzepte der funktionalen
Programmierung für die Objektorientierung passend gemacht, häufig
auf Kosten von Lesbarkeit und Prägnanz.</li>
</ul>
</div>
</div>
<div id="outline-container-org6748e57" class="outline-3">
<h3 id="org6748e57">Konkrete Muster</h3>
<div class="outline-text-3" id="text-org6748e57">
</div>
<div id="outline-container-org11db829" class="outline-4">
<h4 id="org11db829">Das Befehlsmuster (command pattern)</h4>
<div class="outline-text-4" id="text-org11db829">
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Command Design Pattern ermöglicht die Modularisierung von Befehlen
und Aufrufen. Auf elegante Weise können Befehle rückgängig gemacht,
protokolliert oder in einer Warteschlange gelegt werden.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/command.jpg" alt="command.jpg" width="500px" />
</p>
</div>
</div>
<div id="outline-container-org84cb9a0" class="outline-5">
<h5 id="org84cb9a0">Beispiel</h5>
<div class="outline-text-5" id="text-org84cb9a0">
<ul class="org-ul">
<li>Es werden verschiedene Commands betrachtet, die eine
Nachricht verarbeiten.</li>
<li><p>
Basis: ein Interface
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
      <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span>;
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li>Verschiedene Implementierungen des Interface:</li>
</ul>
<ol class="org-ol">
<li><p>
für das Logging
</p>
<div class="org-src-container">
<pre class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Logger</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">Logger</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Logging: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>
</ol>
<ol class="org-ol">
<li value="2"><p>
Speichern der Nachricht
</p>
<div class="org-src-container">
<pre class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">FileSaver</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">FileSaver</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Saving: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>
</ol>
<ol class="org-ol">
<li value="3"><p>
Versenden per Email
</p>
<div class="org-src-container">
<pre class="src src-java">     <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Mailer</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Command</span> <span style="color: #707183;">{</span>
         <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span>;

         <span style="color: #0000FF;">public</span> <span style="color: #006699;">Mailer</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
             <span style="color: #0000FF;">this</span>.message = message;
         <span style="color: #7388D6;">}</span>

         <span style="color: #D0372D;">@Override</span>
         <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">run</span><span style="color: #7388D6;">()</span> <span style="color: #7388D6;">{</span>
             System.out.println<span style="color: #909183;">(</span><span style="color: #008000;">"Sending: "</span> + message<span style="color: #909183;">)</span>;
         <span style="color: #7388D6;">}</span>
     <span style="color: #707183;">}</span>
</pre>
</div></li>
</ol>
<ul class="org-ul">
<li><p>
Ein Objekt, das diese Commands ausführen kann:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Executor</span> <span style="color: #707183;">{</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">execute</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">List</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Command</span><span style="color: #909183;">&gt;</span> <span style="color: #BA36A5;">tasks</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">for</span> <span style="color: #909183;">(</span><span style="color: #6434A3;">Command</span> <span style="color: #BA36A5;">task</span> : tasks<span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
              task.run<span style="color: #709870;">()</span>;
          <span style="color: #909183;">}</span>
      <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li><p>
Ausführung einer Liste von Commands durch den <code>Executor</code>
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #6434A3;">List</span><span style="color: #707183;">&lt;</span><span style="color: #6434A3;">Command</span><span style="color: #707183;">&gt;</span> <span style="color: #BA36A5;">tasks</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span><span style="color: #707183;">&lt;&gt;()</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Logger</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Hi"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">FileSaver</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Cheers"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Mailer</span><span style="color: #7388D6;">(</span> <span style="color: #008000;">"Bye"</span> <span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;

  <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Executor</span><span style="color: #707183;">()</span>.execute<span style="color: #707183;">(</span> tasks <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Wie in <a class="org-ref-reference" href="#/slide-bibliography">[E.-Gamma:1995pd]</a> gefordert, werden Funktionen (die
auszuführenden Aktionen) in Objekte verpackt (die Commands, die
diese Aktionen ausführen).</li>
</ul>
<ul class="org-ul">
<li>Diese Indirektion hat keinen Vorteil, außer Funktionen in strikt
objektorientierter Weise behandeln zu können.</li>
</ul>
</div>
</div>
<div id="outline-container-org76f7ad7" class="outline-5">
<h5 id="org76f7ad7">Die funktionale Version</h5>
<div class="outline-text-5" id="text-org76f7ad7">
<ul class="org-ul">
<li>Durch die Einführung von Lambda-Ausdrücken in <b>Java 8</b> ist es
möglich, beide Paradigmen (OO und FP) nahtlos miteinander zu verknüpfen.</li>
<li>Das <code>Command</code>-Interface wird nicht benötigt, stattdessen kann das
bekannte <code>Runnable</code>-Interface benutzt werden.</li>
<li><p>
Die drei <code>Command</code>-Implementierungen können in Java 8 prägnant durch drei als
statische Methoden implementierte Funktionen geschrieben werden:
</p>
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">log</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Logging: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>

  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">save</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Saving: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>

  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">send</span><span style="color: #707183;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">message</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      System.out.println<span style="color: #7388D6;">(</span><span style="color: #008000;">"Sending: "</span> + message<span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li>Das „Signal-Rausch-Verhältnis” des Codes wird deutlich verbessert,
wenn man als Signal den Rumpf der Funktionen und als Rauschen den
Code, der zusätzlich benötigt wird, um aus den Funktionen Methoden zu
machen, betrachtet.</li>
<li><p>
Auch die <code>Executor</code>-Klasse kann durch eine statische Methode
implementiert werden, die eine Liste von <code>Runnables</code> als Argument
akzeptiert:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">execute</span><span style="color: #707183;">(</span><span style="color: #6434A3;">List</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Runnable</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">tasks</span> <span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
      tasks.forEach<span style="color: #7388D6;">(</span> Runnable::run <span style="color: #7388D6;">)</span>;
  <span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
</ul>
<ul class="org-ul">
<li><p>
Die Funktionen können nun wieder in eine Liste gepackt und wie zuvor
ausgeführt werden:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #6434A3;">List</span><span style="color: #707183;">&lt;</span><span style="color: #6434A3;">Runnable</span><span style="color: #707183;">&gt;</span> <span style="color: #BA36A5;">tasks</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ArrayList</span><span style="color: #707183;">&lt;&gt;()</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; log<span style="color: #7388D6;">(</span><span style="color: #008000;">"Hi"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; save<span style="color: #7388D6;">(</span><span style="color: #008000;">"Cheers"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;
  tasks.add<span style="color: #707183;">(</span><span style="color: #7388D6;">()</span> -&gt; send<span style="color: #7388D6;">(</span><span style="color: #008000;">"Bye"</span><span style="color: #7388D6;">)</span><span style="color: #707183;">)</span>;

  execute<span style="color: #707183;">(</span> tasks <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Der Java-Compiler übersetzt die Lambda-Ausdrücke ohne Argumente, die
die statischen Methoden (<code>log</code>, <code>save</code>, <code>send</code>) ausführen, in
anonyme Implementierungen des <code>Runnable</code>-Interface, wodurch sie in
eine Liste von <code>Runnables</code> gepackt werden können.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge7db181" class="outline-4">
<h4 id="orge7db181">Das Strategiemuster (strategy pattern)</h4>
<div class="outline-text-4" id="text-orge7db181">
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Strategy Design Pattern ermöglicht einer Klasse das flexible
Wechseln von alternativen Verhalten.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/strategy-schema.jpg" alt="strategy-schema.jpg" width="500px" />
</p>
</div>
</div>
<div id="outline-container-org214821c" class="outline-5">
<h5 id="org214821c">Beispiel</h5>
<div class="outline-text-5" id="text-org214821c">
<ul class="org-ul">
<li>Das Ziel des Strategiemusters besteht in der Verallgemeinerung einer
Prozedur durch Verwendung verschiedener austauschbarer Algorithmen.</li>
<li>Hier soll eine Prozedur verallgemeinert werden, die
<ul class="org-ul">
<li>einen Text verarbeitet,</li>
<li>ihn nach gegebenen Kriterien filtert und</li>
<li>nach einer Formatierung/Transformation ausdruckt.</li>
</ul></li>
<li>Es wird also die Verallgemeinerung von zwei Verhaltensweisen benötigt:
<ul class="org-ul">
<li>Filtern des Textes</li>
<li>Transformation des Textes</li>
</ul></li>
<li><p>
Im ersten Schritt werden Verhaltensweisen durch ein Interface
abstrahiert:
</p>
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
        <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span>;
        <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span>;
    <span style="color: #707183;">}</span>
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li>Danach ist es möglich, eine Klasse zu entwerfen, die eine allgemeine
Prozedur für die Publikation eines Textes implementiert.</li>
<li><p>
Ihr wird ein Exemplar eines <code>TextFormatter</code> Interface (die
Strategie) übergeben, das die Details, wie der Text gefiltert und
formatiert werden soll, kapselt:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">TextEditor</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #BA36A5;">textFormatter</span>;
 
    <span style="color: #0000FF;">public</span> <span style="color: #006699;">TextEditor</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">TextFormatter</span> <span style="color: #BA36A5;">textFormatter</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">this</span>.textFormatter = textFormatter;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">publishText</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
       <span style="color: #0000FF;">if</span> <span style="color: #909183;">(</span>textFormatter.filter<span style="color: #709870;">(</span> text <span style="color: #709870;">)</span><span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
           System.out.println<span style="color: #709870;">(</span> textFormatter.format<span style="color: #907373;">(</span> text <span style="color: #907373;">)</span> <span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span>
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li><b>Drei verschiedene Strategie-Implementierungen:</b>
<ol class="org-ol">
<li><p>
die einfachste Variante: der Text wird unverändert ausgedruckt.
</p>
<div class="org-src-container">
<pre class="src src-java">  <span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">PlainTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
      <span style="color: #D0372D;">@Override</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">return</span> <span style="color: #D0372D;">true</span>;
      <span style="color: #7388D6;">}</span>
 
      <span style="color: #D0372D;">@Override</span>
      <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
          <span style="color: #0000FF;">return</span> text;
      <span style="color: #7388D6;">}</span>
  <span style="color: #707183;">}</span>
</pre>
</div></li>
</ol></li>
</ul>
<ol class="org-ol">
<li value="2"><p>
Der Text wird Zeile für Zeile nach Fehlermeldungen
durchsucht. Es werden nur die Zeilen, die mit "ERROR" beginnen,
in Großbuchstaben ausgedruckt.
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ErrorTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.startsWith<span style="color: #909183;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toUpperCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ol>
<ol class="org-ol">
<li value="3"><p>
Text wird in Kleinbuchstaben ausgedruckt, sofern er kürzer
als zwanzig Zeichen ist.
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">ShortTextFormatter</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">TextFormatter</span> <span style="color: #707183;">{</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">filter</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.length<span style="color: #909183;">()</span> &lt; 20;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">format</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toLowerCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ol>
<ul class="org-ul">
<li><p>
Nun kann ein <code>TextEditor</code>-Exemplar angelegt und dabei mit einem
bestimmten <code>TextFormatter</code>-Exemplar versehen werden:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #6434A3;">TextEditor</span> <span style="color: #BA36A5;">textEditor</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">TextEditor</span><span style="color: #707183;">(</span> <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ErrorTextFormatter</span><span style="color: #7388D6;">()</span> <span style="color: #707183;">)</span>;
textEditor.publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span> <span style="color: #707183;">)</span>;
textEditor.publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span> <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Es stellt sich erneut die Frage, ob die Lösung nicht wortreicher
ist, als sie sein sollte.</li>
<li>Das einzig relevante Verhalten (das „Signal”) besteht in der Logik
der <code>publishText</code>-Methode der <code>Textformatter</code>-Klasse. Der Rest ist „Rauschen”.</li>
</ul>
</div>
</div>
<div id="outline-container-org77e4da9" class="outline-5">
<h5 id="org77e4da9">Die funktionale Version</h5>
<div class="outline-text-5" id="text-org77e4da9">
<ul class="org-ul">
<li>Die beiden durch den <code>Textformatter</code> definierten Verhaltensweisen
können problemlos in Form von zwei Funktionen an die
<code>publishText</code>-Methode übergeben werden:
<ul class="org-ul">
<li>ein Prädikat (<code>Predicate</code>) für die Filterung des Textes</li>
<li><p>
eine Transformationsfunktion <code>UnaryOperator</code>, die ein Objekt in ein anderes
desselben Typs verwandelt
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">publishText</span><span style="color: #707183;">(</span> <span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span>, 
                                <span style="color: #6434A3;">Predicate</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">String</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">filter</span>, 
                                <span style="color: #6434A3;">UnaryOperator</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">String</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">format</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">if</span> <span style="color: #7388D6;">(</span>filter.test<span style="color: #909183;">(</span> text <span style="color: #909183;">)</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        System.out.println<span style="color: #909183;">(</span> format.apply<span style="color: #709870;">(</span> text <span style="color: #709870;">)</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ul></li>
</ul>
<ul class="org-ul">
<li><p>
Benutzung von <code>publishText</code> als <code>PlainTextFormatter</code>:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span>, s -&gt; <span style="color: #D0372D;">true</span>, s -&gt; s <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li><p>
Benutzung von <code>publishText</code> als <code>ErrorTextFormatter</code>:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span>,
             s -&gt; s.startsWith<span style="color: #7388D6;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #7388D6;">)</span>, 
             String::toUpperCase <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
</ul>
<ul class="org-ul">
<li><b>Möglicher Einwand:</b> Die Implementierung des <code>TextFormatter</code> als
Klasse ermöglicht einfacher, eine Bibliothek von Strategien zu
realisieren, anstatt ihre Implementierung bei jedem Aufruf erneut zu
implementieren.</li>
<li><p>
Funktionales Gegenmodell:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">TextUtil</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">acceptAll</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> <span style="color: #D0372D;">true</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">noFormatting</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">boolean</span> <span style="color: #006699;">acceptErrors</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.startsWith<span style="color: #909183;">(</span> <span style="color: #008000;">"ERROR"</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">String</span> <span style="color: #006699;">formatError</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">String</span> <span style="color: #BA36A5;">text</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">return</span> text.toUpperCase<span style="color: #909183;">()</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span> 
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li><p>
Benutzung der Klasse <code>TextUtil</code>: Anstelle der anonymen Funktionen
werden nun die dort definierten Methoden/Funktionen verwendet; z.&nbsp;B.:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java">publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"DEBUG - I'm here"</span>, TextUtil::acceptAll, TextUtil::noFormatting <span style="color: #707183;">)</span>;

publishText<span style="color: #707183;">(</span> <span style="color: #008000;">"ERROR - something bad happened"</span>, 
             TextUtil::acceptErrors, TextUtil::formatError <span style="color: #707183;">)</span>;   
</pre>
</div>

</div></li>
<li>Diese Funktionen besitzen eine feinere Granularität als eine
Strategie-Klasse.</li>
<li>Damit ergibt sich eine bessere Wiederverwendbarkeit.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6703860" class="outline-4">
<h4 id="org6703860">Das Beobachtermuster (observer pattern)</h4>
<div class="outline-text-4" id="text-org6703860">
<p>
Zitiert aus <a href="https://www.philipphauer.de/study/se/design-pattern.php">Philipp Hauer: Design Pattern</a>:
</p>
<blockquote>
<p>
Das Observer Entwurfsmuster ist für Situationen geeignet, in denen ein
oder mehrere Objekte benachrichtigt werden müssen, sobald sich der
Zustand eines bestimmten Objekts ändert.
</p>
</blockquote>

<div class="figure">
<p><img src="./Abbildungen/observer-def-schema.jpg" alt="observer-def-schema.jpg" width="500px" />
</p>
</div>
</div>
<div id="outline-container-org6d438f1" class="outline-5">
<h5 id="org6d438f1">Beispiel</h5>
<div class="outline-text-5" id="text-org6d438f1">
<ul class="org-ul">
<li>Das Entwurfsmuster erlaubt einem oder mehreren Objekten, über
auftretende Ereignisse informiert zu werden.</li>
<li><p>
Die elementare Abstraktion ist das <code>Listener</code>-Interface:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">interface</span> <span style="color: #6434A3;">Listener</span> <span style="color: #707183;">{</span>
    <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span>;
<span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
<li>Ein Objekt, das auf das Auftreten des Ereignisses (<code>event</code>)
reagieren soll, muss lediglich dieses Interface implementieren und
in der <code>onEvent</code>-Methode die erforderliche Reaktion festlegen.</li>
</ul>
<ul class="org-ul">
<li>Das Gegenstück zu einem beobachtenden Objekt ist das beobachtete
(beobachtbare, zu beobachtende):
ein <code>Observable</code>-Objekt.</li>
<li><p>
Ein Objekt, das an alle registrierten Beobachter (listeners) eine
Nachricht über ein aufgetretenes Ereignis sendet:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observable</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">Map</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Object</span>, <span style="color: #6434A3;">Listener</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">listeners</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ConcurrentHashMap</span><span style="color: #7388D6;">&lt;&gt;()</span>;
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">register</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span>, <span style="color: #6434A3;">Listener</span> <span style="color: #BA36A5;">listener</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.put<span style="color: #909183;">(</span>key, listener<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">unregister</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.remove<span style="color: #909183;">(</span>key<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
 
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">sendEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        <span style="color: #0000FF;">for</span> <span style="color: #909183;">(</span><span style="color: #6434A3;">Listener</span> <span style="color: #006699;">listener</span> : listeners.values<span style="color: #709870;">()</span><span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
            listener.onEvent<span style="color: #709870;">(</span> event <span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span>
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li>Zwei (herkömmliche) Varianten, ein <code>Observer</code>-Objekt zu implementieren:
<ol class="org-ol">
<li><p>
durch eine anonyme, innere Klasse:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observer1</span> <span style="color: #707183;">{</span>
    <span style="color: #006699;">Observer1</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        observable.register<span style="color: #909183;">(</span> <span style="color: #0000FF;">this</span>, <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Listener</span><span style="color: #709870;">()</span> <span style="color: #709870;">{</span>
            <span style="color: #D0372D;">@Override</span>
            <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #907373;">(</span> <span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span> <span style="color: #907373;">)</span> <span style="color: #907373;">{</span>
                System.out.println<span style="color: #6276BA;">(</span>event<span style="color: #6276BA;">)</span>;
            <span style="color: #907373;">}</span>
        <span style="color: #709870;">}</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ol></li>
</ul>
<ol class="org-ol">
<li value="2"><p>
durch die direkte Implementierung des <code>Listener</code>-Interface:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observer2</span> <span style="color: #0000FF;">implements</span> <span style="color: #6434A3;">Listener</span> <span style="color: #707183;">{</span>
    <span style="color: #006699;">Observer2</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        observable.register<span style="color: #909183;">(</span> <span style="color: #0000FF;">this</span>, <span style="color: #0000FF;">this</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
    <span style="color: #D0372D;">@Override</span>
    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">onEvent</span><span style="color: #7388D6;">(</span> <span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span> <span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        System.out.println<span style="color: #909183;">(</span>event<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>

</div></li>
</ol>
<ul class="org-ul">
<li><p>
Beide Varianten können in der gleichen Weise benutzt werden:
</p>
<div class="small">
<div class="org-src-container">
<pre class="src src-java"><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observable</span><span style="color: #707183;">()</span>;
<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observer1</span><span style="color: #707183;">(</span> observable <span style="color: #707183;">)</span>;
<span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observer2</span><span style="color: #707183;">(</span> observable <span style="color: #707183;">)</span>;
observable.sendEvent<span style="color: #707183;">(</span> <span style="color: #008000;">"Hello World!"</span> <span style="color: #707183;">)</span>;
</pre>
</div>

</div></li>
<li>Auch hier wird das Kernproblem eines großen Teils der GoF-Muster
deutlich: Verben, die Aktionen beschreiben, müssen in Substantive
verwandelt werden: Klassen, die die Aktionen einwickeln.</li>
</ul>
</div>
</div>
<div id="outline-container-org569997c" class="outline-5">
<h5 id="org569997c">Die funktionale Version</h5>
<div class="outline-text-5" id="text-org569997c">
<ul class="org-ul">
<li><p>
Schritt 1: Ersetzen des <code>Listener</code>-Interface durch das semantisch
äquivalente <code>Consumer</code>-Interface:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #0000FF;">public</span> <span style="color: #0000FF;">static</span> <span style="color: #0000FF;">class</span> <span style="color: #6434A3;">Observable</span> <span style="color: #707183;">{</span>
    <span style="color: #0000FF;">private</span> <span style="color: #0000FF;">final</span> <span style="color: #6434A3;">Map</span><span style="color: #7388D6;">&lt;</span><span style="color: #6434A3;">Object</span>, <span style="color: #6434A3;">Consumer</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Object</span><span style="color: #909183;">&gt;</span><span style="color: #7388D6;">&gt;</span> <span style="color: #BA36A5;">listeners</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">ConcurrentHashMap</span><span style="color: #7388D6;">&lt;&gt;()</span>;

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">register</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span>, <span style="color: #6434A3;">Consumer</span><span style="color: #909183;">&lt;</span><span style="color: #6434A3;">Object</span><span style="color: #909183;">&gt;</span> <span style="color: #BA36A5;">listener</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.put<span style="color: #909183;">(</span>key, listener<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">unregister</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">key</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.remove<span style="color: #909183;">(</span>key<span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>

    <span style="color: #0000FF;">public</span> <span style="color: #6434A3;">void</span> <span style="color: #006699;">sendEvent</span><span style="color: #7388D6;">(</span><span style="color: #6434A3;">Object</span> <span style="color: #BA36A5;">event</span><span style="color: #7388D6;">)</span> <span style="color: #7388D6;">{</span>
        listeners.values<span style="color: #909183;">()</span>.forEach<span style="color: #909183;">(</span> listener -&gt; listener.accept<span style="color: #709870;">(</span> event <span style="color: #709870;">)</span> <span style="color: #909183;">)</span>;
    <span style="color: #7388D6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div></li>
</ul>
<ul class="org-ul">
<li>Schritt 2:
<ul class="org-ul">
<li>Die Implementierung der Listener durch eigene Klassen ist
nicht mehr notwendig.</li>
<li><p>
Die spezifische Reaktion auf das Eintreten eines Ereignisse kann
durch einen Lambda-Ausdruck oder einen Methoden-Verweis kodiert werden:
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #6434A3;">Observable</span> <span style="color: #BA36A5;">observable</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">Observable</span><span style="color: #707183;">()</span>;
observable.register<span style="color: #707183;">(</span> <span style="color: #008000;">"key1"</span>, e -&gt; System.out.println<span style="color: #7388D6;">(</span>e<span style="color: #7388D6;">)</span> <span style="color: #707183;">)</span>;
observable.register<span style="color: #707183;">(</span> <span style="color: #008000;">"key2"</span>, System.out::println <span style="color: #707183;">)</span>;
observable.sendEvent<span style="color: #707183;">(</span> <span style="color: #008000;">"Hello World!"</span> <span style="color: #707183;">)</span>;  
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org15e2d1c" class="outline-2">
<h2 id="bibliography">Literaturverzeichnis</h2>
<div class="outline-text-2" id="text-bibliography">
<ul class='org-ref-bib'><li><a id="E.-Gamma:1995pd">[E.-Gamma:1995pd]</a> <a name="E.-Gamma:1995pd"></a>Erich Gamma, Richard Helm, Ralph Johnson & John Vlissides, Design Patterns: Elements of Reusable Object-Oriented Software, Addison-Wesley (1995).</li>
<li><a id="Norvig1998">[Norvig1998]</a> <a name="Norvig1998"></a>Peter Norvig, Design Patterns in Dynamic Languages, (1998), zuletzt aufgerufen am 10.09.2018: <a href="http://www.norvig.com/design-patterns/">http://www.norvig.com/design-patterns/</a> </li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Autor: Johannes Brauer</p>
<p class="date">Created: 2019-07-27 Sat 18:11</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>